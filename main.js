(()=>{"use strict";var e,t,n,r,o={560:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{M0:()=>te,cH:()=>ue,h4:()=>W,ki:()=>ce,sH:()=>he,wR:()=>P,wb:()=>ye});var o,a,i=n(634),c=n(960),s=n(911),l=n(211),u=n(49),d=n(390),p=n(252),m=n(724),y=n(256),f=n(47),h=n(880),g=n(340),v=e([c,s,l,d,p,m,y,f,g]);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function H(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */H=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new A(r||[]);return o(i,"_invoke",{value:L(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function v(){}function E(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==n&&r.call(x,i)&&(b=x);var I=E.prototype=g.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==F(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=S(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function S(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(F(t)+" is not iterable")}return v.prototype=E,o(I,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:v,configurable:!0}),v.displayName=l(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,l(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},k(B.prototype),l(B.prototype,c,(function(){return this})),t.AsyncIterator=B,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new B(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(I),l(I,s,"Generator"),l(I,i,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function D(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){D(a,r,o,i,c,"next",e)}function c(e){D(a,r,o,i,c,"throw",e)}i(void 0)}))}}[c,s,l,d,p,m,y,f,g]=v.then?(await v)():v;var E=!1,b=document.getElementById("loginButton");b.addEventListener("click",(function(){(0,u.Ak)("basic_button"),V()}));var w=document.getElementById("mobileLoginButton");w.addEventListener("click",(function(){(0,u.Ak)("basic_button"),V()}));var x=document.getElementById("logoutButton");x.addEventListener("click",$);var I=document.getElementById("mobileLogoutButton");I.addEventListener("click",$);var k=document.getElementById("profileInfo");k.addEventListener("click",(function(){(0,f.nk)(localStorage.getItem("id"),!0,!0),(0,u.Ak)("basic_button")}));var B=document.getElementById("mobileProfileButton");B.addEventListener("click",(function(){(0,u.Ak)("basic_button"),(0,f.nk)(localStorage.getItem("id"),!0,!0)}));var L=document.getElementById("accountName"),S=document.getElementById("XPbarNoAccount"),T=document.getElementById("XParea");x.style.display="none",I.style.display="none",B.style.display="none",T.style.display="none";var C=document.getElementById("endScreenLevel"),A=document.getElementById("endScreenLevelDisplay");function z(){return U.apply(this,arguments)}function U(){return(U=q(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.hG)(localStorage.getItem("id"),document.getElementById("accountDeletePassword").value,"index");case 2:e.sent&&($(),setTimeout((function(){(0,f.Er)(),(0,h.N)("Account deleted successfully","You have deleted your OpenGuessr account.","",!1,!0)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.getElementById("accountDeleteButton").addEventListener("click",(function(){(0,u.Ak)("basic_button"),(0,c.WV)("Delete your Account","Please input your password to confirm the account deletion. Make sure to delete user-created content before proceeding, if you wish to remove that from the platform.",z,!0)}));var M,P=!1;function W(){var e=localStorage.getItem("bearer");null!=e&&""!=e?J(e)?(P=!1,Y()):P=!0:P=!1,ne()}function J(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));try{var r=JSON.parse(n).exp;return Date.now()>=1e3*r}catch(e){return expired=!1,expired}}function Y(){localStorage.removeItem("bearer"),localStorage.removeItem("id"),localStorage.removeItem("username"),localStorage.removeItem("experience"),(0,f.cQ)(null)}function $(){Y(),W()}function V(){(0,c.rP)("/signup.html",!0)}function X(e){return K.apply(this,arguments)}function K(){return(K=q(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.style.display="inline-block",b.style.display="none",I.style.display="inline-block",w.style.display="none",B.style.display="inline-block",S.style.display="none",T.style.display="flex",oe(),te(),(0,f.vW)(),(0,f.b0)(),t&&t>0&&ee(!0),t&&t>=2&&(0,c.km)(!1),c.Lv&&E&&ye(a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return Q.apply(this,arguments)}function Q(){return(Q=q(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.style.display="none",b.style.display="inline-block",I.style.display="none",w.style.display="inline-block",B.style.display="none",S.style.display="",T.style.display="none",ae(),L.innerHTML="Guest",(0,c.kN)(),ce(0),(0,f.vW)(),(0,f.b0)(),ee(!1),(0,g.$6)(!1),(0,c.km)(!0);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){e?document.getElementById("profileInfo").classList.add("profileInfoSupporter"):document.getElementById("profileInfo").classList.remove("profileInfoSupporter")}function te(){ce(localStorage.getItem("experience")),L.innerHTML=localStorage.getItem("username"),(0,c.kN)()}function ne(){return re.apply(this,arguments)}function re(){return(re=q(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=12;break}return k.classList.remove("notSignedIn"),e.prev=2,e.next=5,(0,i.wz)(localStorage.getItem("bearer"),localStorage.getItem("id"),"index").then((function(e){(0,f.cQ)(e.profile_data),X(e.supporter_level),(0,f.hs)(e.supporter_level,e.supported_amount),e.new_requests&&(0,g.$6)(!0),(0,g.A0)()}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error getting user data in checkSigninStatusAndLoadUserInfo: "+e.t0);case 10:e.next=14;break;case 12:Z(),k.classList.add("notSignedIn");case 14:(0,s.QU)();case 15:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function oe(){var e=document.getElementsByClassName("accountLock");o=Array.from(e);for(var t=0;t<o.length;t++)o[t].classList.remove("accountLock");document.getElementById("categoryExclusiveText").innerHTML="You can now select these maps:"}function ae(){if(o)for(var e=0;e<o.length;e++)o[e].classList.add("accountLock");document.getElementById("categoryExclusiveText").innerHTML=" Sign up to unlock for free: "}function ie(e){var t=document.querySelector(".progressRingCircle"),n=t.r.baseVal.value,r=2*Math.PI*n;t.style.strokeDasharray="".concat(r," ").concat(r),t.style.strokeDashoffset="".concat(r);var o=r-e*r;t.style.strokeDashoffset=o}function ce(e){null!=e&&null!=e||(e=0);var t=1;for(M=5e3;e>=M;)e-=M,t++,M=Math.floor(5e3*Math.pow(1.1,t-1));return P?(document.getElementById("progressRingLevel").innerHTML=t,A.innerHTML="Lvl. "+t,ie(0!=e?Math.max(e/M,.1):0)):(ie(0),document.getElementById("progressRingLevel").innerHTML="1"),{fraction:e/M,requiredForLevelUpgrade:M-e,level:t}}function se(e,t){var n=1;for(M=5e3;e>=M;)e-=M,n++,M=Math.floor(5e3*Math.pow(1.1,n-1));return(e+t)/M}W(),document.getElementById("resultSignupPrompt").addEventListener("click",(function(){V()}));var _=0,N=document.getElementById("streakDisplay"),O=document.getElementById("endScreenStreakText"),j=localStorage.getItem("streak");function le(e){return 0===e?1:e>=9?1.5:Math.round(100*(1+e/9*.5))/100}null!=j&&(_=Number(j));var G,R=1;function ue(e){_=e,localStorage.setItem("streak",_),R=le(_),O.textContent=_+" ("+R+"x)"}function de(){s.$s||y.GS||((0,d.r3)(p.MN,p.b5)==(0,d.r3)(d.rb,d.yT)?_++:(_>=2&&(0,m.H)(_,!1),(0,f.HT)(_),_=0),localStorage.setItem("streak",_),R=le(_),O.textContent=_+" ("+R+"x)",N.style.opacity="1",N.style.width="auto",N.style.maxWidth="unset")}function pe(){return s.$s||y.GS?1:R}function me(e,t,n,r){var o=0;null==t||"standard"==t||"capital"==t||"hard"==t?(de(),o=Math.round(5e3*Math.pow(.998036,e)*pe())):"europe"==t||"asia"==t||"africa"==t||"oceania"==t||"southamerica"==t?(de(),o=Math.round(5e3*Math.pow(.996036,e)*pe())):"famous"==t||"image"==t?(de(),o=Math.round(1500*Math.pow(.998036,e)*pe())):t&&t.includes("community")?(de(),o=Math.round(3e3*Math.pow(.994036,e)*pe())):o="northamerica"==t?Math.round(5e3*Math.pow(.996036,e)):"country"==t?(0,l.YV)()?1e3:0:"israel"==t||"austria"==t||"slovakia"==t||"czechia"==t?Math.round(5e3*Math.pow(.978036,e)):Math.round(5e3*Math.pow(.988036,e));var a=1;if(n&&n>0)switch(n){case 1:a=1.1;break;case 2:a=1.15;break;case 3:a=1.2;break;case 4:a=1.25}return r&&a<1.2&&(a=1.2),{earnedXP:Math.round(o*a),earnedXPWithoutSupporterBoost:o,supporterMultiplier:a}}function ye(e){return fe.apply(this,arguments)}function fe(){return(fe=q(H().mark((function e(t){var n,r,o,i,l,u,d,p,m;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1,clearTimeout(G),a=t,P||s.$s||(E=!0),(P||s.$s)&&(E=!1,r=document.getElementById("endScreenXPbarResource"),null==(o=Number(localStorage.getItem("experience")))&&(o=0),i=localStorage.getItem("selectedCategory"),N.style.opacity="0",N.style.width="0",N.style.maxWidth="0",s.$s||y.GS?s.$s?(p=me(t,s.ld,s.DK),l=p.earnedXP,u=p.earnedXPWithoutSupporterBoost,n=p.supporterMultiplier,s.jU?(0,s.Eu)(s.cl,l):(0,s.M0)("score",l)):y.GS&&(m=me(t,"standard"),l=m.earnedXP,u=m.earnedXPWithoutSupporterBoost,(0,y.LG)(l)):(d=me(t,i,f.FT,c.XF),l=d.earnedXP,u=d.earnedXPWithoutSupporterBoost,n=d.supporterMultiplier),r.classList.remove("XPbarAnimate"),se(o,l)>1?r.style.width=0:r.style.width=100*ce(o).fraction+"%",l>0&&P&&he(o+l,l,!1),setTimeout((function(){r.classList.add("XPbarAnimate"),r.style.width=Math.max(100*ce(o+l).fraction,4)+"%",C.innerHTML="+"+l+" XP",be(C,0,u,1500),n>1&&l>u&&((0,c.G)(n),G=setTimeout((function(){be(C,u,l,750)}),3500))}),10));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t,n){return ge.apply(this,arguments)}function ge(){return(ge=q(H().mark((function e(t,n,r){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.Uh)(localStorage.getItem("bearer"),localStorage.getItem("id"),t,"index",r);case 3:"retry"==e.sent&&0!=n&&ve(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error setting User XP in accountLogic.js: "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ve(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=q(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.warn("Re-attempting XP set due to error 400 (local save behind)"),e.next=4,ne();case 4:he(Number(localStorage.getItem("experience"))+t,0,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Re-attempting the XP update failed: "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function be(e,t,n,r){var o=null;e.dataset.originalText||(e.dataset.originalText=e.innerHTML),requestAnimationFrame((function a(i){o||(o=i);var c,s=Math.min((i-o)/r,1),l=Math.floor(t+(n-t)*(c=s,1-Math.pow(1-c,3))),u=e.dataset.originalText;e.innerHTML=u.replace(/(\+\d+)\s*(XP)/,"+".concat(l," $2")),s<1?requestAnimationFrame(a):e.innerHTML=u.replace(/(\+\d+)\s*(XP)/,"+".concat(n," $2"))}))}r()}catch(we){r(we)}}))},108:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{BI:()=>g,FB:()=>T,JS:()=>B,LL:()=>L,X$:()=>k,jv:()=>S,sw:()=>E,v$:()=>x});var o=n(390),a=n(960),i=n(709),c=n(911),s=n(880),l=n(252),u=n(211),d=n(49),p=n(724),m=n(256),y=n(678),f=e([o,a,i,c,l,u,p,m]);[o,a,i,c,l,u,p,m]=f.then?(await f)():f;var h={STANDARD:"standard",CAPITAL:"capital",FAMOUS:"famous",COUNTRY:"country",IMAGE:"image",USA:"usa",GERMANY:"germany",UK:"uk",FRANCE:"france",SPAIN:"spain",POLAND:"poland",CANADA:"canada",SWEDEN:"sweden",INDIA:"india",MEXICO:"mexico",ITALY:"italy",UKRAINE:"ukraine",AUSTRIA:"austria",NORWAY:"norway",AUSTRALIA:"australia",BRASIL:"brasil",RUSSIA:"russia",SLOVAKIA:"slovakia",ROMANIA:"romania",TURKEY:"turkey",FINLAND:"finland",ISRAEL:"israel",CZECHIA:"czechia",JAPAN:"japan",INDONESIA:"indonesia",AFRICA:"africa",SOUTHAMERICA:"southamerica",NORTHAMERICA:"northamerica",ASIA:"asia",EUROPE:"europe",OCEANIA:"oceania"},g=h.STANDARD;function E(){try{document.getElementById("communityMapArea").innerHTML="";var e=[];e=JSON.parse(localStorage.getItem("addedCommunityMaps"))||[],null==localStorage.getItem("addedCommunityMaps")&&(e=["Indoor","Airports","Bridges","Racetracks"],localStorage.setItem("addedCommunityMaps",JSON.stringify(e))),e.forEach((function(e){document.getElementById("communityMapArea").innerHTML+='<button class="category communityMap" id="community_'.concat(e.toLowerCase(),'Category"\n            type="button">').concat(e,"</button>"),h["COMMUNITY_"+e.toUpperCase()]="community_"+e.toLowerCase()}))}catch(e){console.error("Error loading community maps from localstorage: "+e)}}function b(){for(var e=document.getElementsByClassName("communityMap"),t=Array.from(e),n=function(e){var n=t[e].id+"Remove";t[e].innerHTML+='<img class="specialCategoryInfo" id="'.concat(n,'" alt="remove category" src="/IMG/delete_icon.png">'),document.getElementById(n).addEventListener("click",(function(n){n.stopPropagation(),w(t[e].textContent),t[e].remove()}))},r=0;r<t.length;r++)n(r)}function w(e){try{var t=JSON.parse(localStorage.getItem("addedCommunityMaps"))||[],n=t.indexOf(e);-1!==n&&(t.splice(n,1),localStorage.setItem("addedCommunityMaps",JSON.stringify(t)))}catch(e){console.error("Error removing community map: "+e)}}function x(){for(var e in h){var t=document.getElementById("".concat(e.toLowerCase(),"Category"));if(t){var n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),n.addEventListener("click",I(h[e]))}else console.warn('Element with ID "'.concat(e.toLowerCase(),'Category" not found. Click listener not attached.'))}b()}function I(e){return function(){k(e,!0),(0,d.Ak)("button_juicy")}}function k(e,t){document.querySelectorAll("[id$='Category']").forEach((function(e){return e.classList.add("categoryDisabled")}));var n=document.getElementById("".concat(e.toLowerCase(),"Category"));n?n.classList.remove("categoryDisabled"):console.warn('Element with ID "'.concat(e.toLowerCase(),'Category" not found.')),g!==e&&(g=e,localStorage.setItem("selectedCategory",e)),t&&(a.Lv||(0,l.eL)(),B(),setTimeout((function(){(0,a.qR)(!0)}),200))}function B(){try{m.Xh.stopTimer()}catch(e){}if(document.getElementById("mapTimer").textContent="00:00",(0,u._s)(!1),(0,y.QS)(!1),c.$s||m.GS)if(c.$s)try{(0,i.H)(!1),c.jU?"standard"!=g&&T(g)&&!g.includes("community")?(0,o.FB)("JSON"):"standard"==g?(0,o.FB)("SDK"):g.includes("community")?(0,o.FB)("COMMUNITY"):(k("standard",!0),setTimeout((function(){(0,s.N)("Unsupported Multiplayer Map","This map category is not available for multiplayer and was automatically changed to Standard.","Map unsupported",!1)}),3500)):(0,o.FB)("FROMHOST")}catch(e){console.error("Error loading multiplayer location in categoryMenu.js Error: ",e)}else m.GS&&(0,m.mU)(!1)&&((0,i.H)(!1),(0,o.FB)("COMPETITION"));else(0,c.sB)(!1),"standard"==g||"country"==g||"image"==g||g.includes("community")?"country"==g?((0,u._s)(!0),(0,o.FB)("JSON")):"image"==g?((0,y.QS)(!0),(0,o.FB)("JSON")):"standard"==g?(0,o.FB)("SDK"):g.includes("community")?(0,o.FB)("COMMUNITY"):console.error("Incorrect mapCategory set in categoryMenu.js under checkGenerationTypeAndGenerate."):(0,o.FB)("JSON")}function L(){var e=localStorage.getItem("selectedCategory");null!=e&&(g=e)}E(),x(),(0,m.UH)(!1),L(),k(g,!0),document.getElementById("nextRound").addEventListener("click",(function(){a.Lv&&(S(),(0,d.Ak)("basic_button"))})),window.addEventListener("keydown",(function(e){" "===e.key&&(0,a.dS)(document.getElementById("nextRound"))&&a.Lv&&(S(),(0,d.Ak)("basic_button"))}));var v=!1;function S(){v?console.warn("CategoryMenu.js: Already transitioning to start!"):(v=!0,setTimeout((function(){v=!1}),400),document.getElementById("BeforeOverlay").style.visibility="visible",document.getElementById("BeforeOverlay").style.opacity="100",(0,p.H)(0,!0),(0,a.Q8)(),B(),setTimeout(a.l5,650),c.jU&&c.$s&&(clearTimeout(c.kN),(0,c.ix)("closeResultScreen"),(0,c.Wn)()),(0,a.L_)())}function T(e){return"country"!=e&&"image"!=e}r()}catch(C){r(C)}}))},256:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{GS:()=>f,LG:()=>L,UH:()=>x,Xh:()=>y,Y6:()=>h,jE:()=>S,mU:()=>M,qm:()=>o,sX:()=>k});var o,a=n(252),i=n(138),c=n(960),s=n(108),l=n(49),u=n(880),d=n(911),p=n(47),m=e([a,c,s,d,p]);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function E(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new P(r||[]);return o(i,"_invoke",{value:T(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function b(){}function w(){}var x={};l(x,i,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(_([])));k&&k!==n&&r.call(k,i)&&(x=k);var B=w.prototype=g.prototype=Object.create(x);function L(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==v(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=C(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(v(t)+" is not iterable")}return b.prototype=w,o(B,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,s,"GeneratorFunction")),e.prototype=Object.create(B),e},t.awrap=function(e){return{__await:e}},L(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(B),l(B,s,"Generator"),l(B,i,(function(){return this})),l(B,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function b(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,c,"next",e)}function c(e){b(a,r,o,i,c,"throw",e)}i(void 0)}))}}[a,c,s,d,p]=m.then?(await m)():m;var y,f=!1,h=0,g=0;function x(e){o=JSON.parse(localStorage.getItem("competition")),h=0,g=0,o&&(localStorage.removeItem("competition"),f=!0,(0,c.Q8)(),I(!0),(0,d.x9)(o.restriction),(0,p.ID)(),setTimeout((function(){(0,l.Ak)("match_start")}),400),e&&(0,s.JS)())}function I(e){try{(0,c.qR)(!0);var t=document.getElementById("categoryMenuButton"),n=document.getElementById("timerButton");e?(document.getElementById("mapModeIndicator").style.display="flex",document.getElementById("mapModeText").textContent="Competition",document.getElementById("multiplayerLeave").style.display="none",document.getElementById("competitionLeave").style.display="block",t.style.opacity="0.5",t.style.pointerEvents="none",(0,c.Zv)(!1),n.style.opacity="0.5",n.style.pointerEvents="none",document.getElementById("revealCompass").style.bottom="calc(50% - 10px)",document.querySelectorAll(".mobileHideInMultiplayer").forEach((function(e){e.style.pointerEvents="none",e.style.opacity="0.5"}))):(document.getElementById("mapModeIndicator").style.display="none",document.getElementById("competitionLeave").style.display="none",t.style.opacity="1",t.style.pointerEvents="auto",(0,c.Zv)(!0),n.style.opacity="1",n.style.pointerEvents="auto",document.getElementById("revealCompass").style.bottom="calc(50% - 40px)",document.querySelectorAll(".mobileHideInMultiplayer").forEach((function(e){e.style.pointerEvents="auto",e.style.opacity="1"})))}catch(e){console.error("Error enabling competition UI: "+e)}}function k(){f&&(h++,document.getElementById("mapModeText").textContent="Competition (Round: "+h+"/"+o.roundAmount+")",o.restriction&&"standard"!=o.restriction&&(document.getElementById("mapModeText").textContent="Competition (Round: "+h+"/"+o.roundAmount+") ("+o.restriction+")"),y=(0,i.I)(o.roundLength,B))}function B(){(0,a.qJ)()}function L(e){g+=e}function S(e){return T.apply(this,arguments)}function T(){return(T=w(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=8;break}return f=!1,I(!1),(0,s.JS)(),(0,d.x9)("standard"),e.next=7,C(o.id,g,p.FT,localStorage.getItem("bearer"));case 7:t&&(0,c.rP)("/competitions.html?leaderboard="+o.id);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,n,r){return A.apply(this,arguments)}function A(){return(A=w(E().mark((function e(t,n,r,o){var a,i,c,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={username:localStorage.getItem("username"),id:localStorage.getItem("id"),score:n,supporter_level:r||0},e.next=4,fetch("https://competitions.openguessr.com/competitions/submit/"+t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(a)});case 4:if((i=e.sent).ok){e.next=23;break}return c=null,e.prev=7,e.next=10,i.json();case 10:c=e.sent,s=[],c.error&&s.push(c.error),c.message&&s.push(c.message),c.errors&&Array.isArray(c.errors)&&c.errors.forEach((function(e){e.msg?s.push(e.msg):s.push(JSON.stringify(e))})),console.error("Error during competition result submission: "+s.join(" ")),(0,u.N)("Competition submission failed","The result could not be submitted.",s.join(" ")),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),console.error("Error occured when submitting result on server and response did not include a json response."),(0,u.N)("Competition submission failed","Competition server did not include error messages in the response.",i.status);case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(0),console.error("Error occurred during competition result submission: "+e.t1),(0,u.N)("Competition submission failed (Network)","The comptition server could not be reached. Please check your internet connection and submit a bug report in the Discord if it persists.",e.t1);case 29:case"end":return e.stop()}}),e,null,[[0,25],[7,19]])})))).apply(this,arguments)}function M(e){return h!=o.roundAmount||(e||S(!0),!1)}document.getElementById("competitionLeave").addEventListener("click",(function(){(0,l.Ak)("basic_button"),S(!0)})),r()}catch(P){r(P)}}))},211:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{F5:()=>g,YV:()=>h,_s:()=>f,at:()=>l,q9:()=>u});var o=n(960),a=n(252),i=n(911),c=n(49),s=e([o,a,i]);[o,a,i]=s.then?(await s)():s;var l=!1,u=null,d=null,p=null;function f(e){e?(l=!0,i.$s||(document.getElementById("map").style.visibility="hidden",(0,o.uc)(!0),document.getElementById("revealCompass").style.visibility="hidden"),document.getElementById("countryGuesserSelector").style.display="flex"):(l=!1,i.$s||(document.getElementById("map").style.visibility="visible",(0,o.uc)(!1),document.getElementById("revealCompass").style.visibility="visible"),document.getElementById("countryGuesserSelector").style.display="none")}function h(){return p==d}function g(e){u=e,v();try{if(l){for(var t=[],n=1;n<=6;n++){for(var r=document.getElementById("countryTag"+n),o=document.getElementById("countryFlag"+n),a=Math.floor(Math.random()*Object.keys(y).length);Object.keys(y)[a]==u||t.includes(Object.keys(y)[a]);)a=Math.floor(Math.random()*Object.keys(y).length);var i=Object.keys(y)[a];r.textContent=i,o.textContent=y[i],t.push(i),i.length>17&&(r.textContent=i.slice(0,14)+"...")}p=Math.floor(6*Math.random())+1;var c=document.getElementById("countryTag"+p),s=document.getElementById("countryFlag"+p),d=u;c.textContent=d,s.textContent=y[d],d.length>17&&(c.textContent=d.slice(0,14)+"...")}}catch(e){console.error("Error generating random category options in countryGuesser.js: "+e)}}var m=document.querySelectorAll(".countryGuesserHolder");function v(){m.forEach((function(e){return e.classList.remove("selectedCountry")})),d=null}m.forEach((function(e,t){e.addEventListener("click",(function(){m.forEach((function(e){return e.classList.remove("selectedCountry")})),e.classList.add("selectedCountry"),(0,c.Ak)("item_select"),d=t+1,(0,a.oO)()}))})),document.getElementById("countryGuesserSelector").addEventListener("keyup",(function(e){" "===e.key&&("auto"==document.getElementById("confirmButton").style.pointerEvents?(0,a.qJ)():console.warn("Cannot click on confirm button - pointer events is none."))}));var y={Andorra:"ðŸ‡¦ðŸ‡©","United Arab Emirates":"ðŸ‡¦ðŸ‡ª","Antigua and Barbuda":"ðŸ‡¦ðŸ‡¬",Anguilla:"ðŸ‡¦ðŸ‡®",Albania:"ðŸ‡¦ðŸ‡±",Armenia:"ðŸ‡¦ðŸ‡²",Angola:"ðŸ‡¦ðŸ‡´",Argentina:"ðŸ‡¦ðŸ‡·","American Samoa":"ðŸ‡¦ðŸ‡¸",Austria:"ðŸ‡¦ðŸ‡¹",Australia:"ðŸ‡¦ðŸ‡º",Aruba:"ðŸ‡¦ðŸ‡¼",Azerbaijan:"ðŸ‡¦ðŸ‡¿","Bosnia and Herzegovina":"ðŸ‡§ðŸ‡¦",Barbados:"ðŸ‡§ðŸ‡§",Bangladesh:"ðŸ‡§ðŸ‡©",Belgium:"ðŸ‡§ðŸ‡ª","Burkina Faso":"ðŸ‡§ðŸ‡«",Bulgaria:"ðŸ‡§ðŸ‡¬",Bahrain:"ðŸ‡§ðŸ‡­",Burundi:"ðŸ‡§ðŸ‡®",Benin:"ðŸ‡§ðŸ‡¯",Bermuda:"ðŸ‡§ðŸ‡²","Brunei Darussalam":"ðŸ‡§ðŸ‡³",Bolivia:"ðŸ‡§ðŸ‡´",Brazil:"ðŸ‡§ðŸ‡·",Bahamas:"ðŸ‡§ðŸ‡¸",Bhutan:"ðŸ‡§ðŸ‡¹",Botswana:"ðŸ‡§ðŸ‡¼",Belarus:"ðŸ‡§ðŸ‡¾",Belize:"ðŸ‡§ðŸ‡¿",Canada:"ðŸ‡¨ðŸ‡¦","Cocos (Keeling) Islands":"ðŸ‡¨ðŸ‡¨","Democratic Republic of the Congo (Congo-Kinshasa, former Zaire)":"ðŸ‡¨ðŸ‡©","Centrafrican Republic":"ðŸ‡¨ðŸ‡«","Republic of the Congo (Congo-Brazzaville)":"ðŸ‡¨ðŸ‡¬",Switzerland:"ðŸ‡¨ðŸ‡­","CÃ´te d'Ivoire":"ðŸ‡¨ðŸ‡®","Cook Islands":"ðŸ‡¨ðŸ‡°",Chile:"ðŸ‡¨ðŸ‡±",Cameroon:"ðŸ‡¨ðŸ‡²",China:"ðŸ‡¨ðŸ‡³",Colombia:"ðŸ‡¨ðŸ‡´","Costa Rica":"ðŸ‡¨ðŸ‡·",Cuba:"ðŸ‡¨ðŸ‡º","Cabo Verde":"ðŸ‡¨ðŸ‡»",CuraÃ§ao:"ðŸ‡¨ðŸ‡¼","Christmas Island":"ðŸ‡¨ðŸ‡½",Cyprus:"ðŸ‡¨ðŸ‡¾",Czechia:"ðŸ‡¨ðŸ‡¿",Germany:"ðŸ‡©ðŸ‡ª",Djibouti:"ðŸ‡©ðŸ‡¯",Denmark:"ðŸ‡©ðŸ‡°",Dominica:"ðŸ‡©ðŸ‡²","Dominican Republic":"ðŸ‡©ðŸ‡´",Algeria:"ðŸ‡©ðŸ‡¿",Ecuador:"ðŸ‡ªðŸ‡¨",Estonia:"ðŸ‡ªðŸ‡ª",Egypt:"ðŸ‡ªðŸ‡¬","Western Sahara":"ðŸ‡ªðŸ‡­",Eritrea:"ðŸ‡ªðŸ‡·",Spain:"ðŸ‡ªðŸ‡¸",Ethiopia:"ðŸ‡ªðŸ‡¹",Finland:"ðŸ‡«ðŸ‡®",Fiji:"ðŸ‡«ðŸ‡¯","Falkland Islands":"ðŸ‡«ðŸ‡°","Micronesia (Federated States of)":"ðŸ‡«ðŸ‡²","Faroe Islands":"ðŸ‡«ðŸ‡´",France:"ðŸ‡«ðŸ‡·",Gabon:"ðŸ‡¬ðŸ‡¦","United Kingdom":"ðŸ‡¬ðŸ‡§",Grenada:"ðŸ‡¬ðŸ‡©",Georgia:"ðŸ‡¬ðŸ‡ª","French Guiana":"ðŸ‡¬ðŸ‡«",Guernsey:"ðŸ‡¬ðŸ‡¬",Ghana:"ðŸ‡¬ðŸ‡­",Gibraltar:"ðŸ‡¬ðŸ‡®",Greenland:"ðŸ‡¬ðŸ‡±","The Gambia":"ðŸ‡¬ðŸ‡²",Guinea:"ðŸ‡¬ðŸ‡³",Guadeloupe:"ðŸ‡¬ðŸ‡µ","Equatorial Guinea":"ðŸ‡¬ðŸ‡¶",Greece:"ðŸ‡¬ðŸ‡·",Guatemala:"ðŸ‡¬ðŸ‡¹",Guam:"ðŸ‡¬ðŸ‡º","Guinea Bissau":"ðŸ‡¬ðŸ‡¼",Guyana:"ðŸ‡¬ðŸ‡¾","Hong Kong (SAR of China)":"ðŸ‡­ðŸ‡°","Heard Island and McDonald Islands":"ðŸ‡­ðŸ‡²",Honduras:"ðŸ‡­ðŸ‡³",Croatia:"ðŸ‡­ðŸ‡·",Haiti:"ðŸ‡­ðŸ‡¹",Hungary:"ðŸ‡­ðŸ‡º",Indonesia:"ðŸ‡®ðŸ‡©",Ireland:"ðŸ‡®ðŸ‡ª",Israel:"ðŸ‡®ðŸ‡±","Isle of Man":"ðŸ‡®ðŸ‡²",India:"ðŸ‡®ðŸ‡³","British Indian Ocean Territory":"ðŸ‡®ðŸ‡´",Iraq:"ðŸ‡®ðŸ‡¶",Iran:"ðŸ‡®ðŸ‡·",Iceland:"ðŸ‡®ðŸ‡¸",Italy:"ðŸ‡®ðŸ‡¹",Jersey:"ðŸ‡¯ðŸ‡ª",Jamaica:"ðŸ‡¯ðŸ‡²",Jordan:"ðŸ‡¯ðŸ‡´",Japan:"ðŸ‡¯ðŸ‡µ",Kenya:"ðŸ‡°ðŸ‡ª",Kyrgyzstan:"ðŸ‡°ðŸ‡¬",Cambodia:"ðŸ‡°ðŸ‡­",Kiribati:"ðŸ‡°ðŸ‡®",Comores:"ðŸ‡°ðŸ‡²","Saint Kitts and Nevis":"ðŸ‡°ðŸ‡³","North Korea":"ðŸ‡°ðŸ‡µ","South Korea":"ðŸ‡°ðŸ‡·",Kuwait:"ðŸ‡°ðŸ‡¼","Cayman Islands":"ðŸ‡°ðŸ‡¾",Kazakhstan:"ðŸ‡°ðŸ‡¿",Laos:"ðŸ‡±ðŸ‡¦",Lebanon:"ðŸ‡±ðŸ‡§","Saint Lucia":"ðŸ‡±ðŸ‡¨",Liechtenstein:"ðŸ‡±ðŸ‡®","Sri Lanka":"ðŸ‡±ðŸ‡°",Liberia:"ðŸ‡±ðŸ‡·",Lesotho:"ðŸ‡±ðŸ‡¸",Lithuania:"ðŸ‡±ðŸ‡¹",Luxembourg:"ðŸ‡±ðŸ‡º",Latvia:"ðŸ‡±ðŸ‡»",Libya:"ðŸ‡±ðŸ‡¾",Morocco:"ðŸ‡²ðŸ‡¦",Monaco:"ðŸ‡²ðŸ‡¨",Moldova:"ðŸ‡²ðŸ‡©",Montenegro:"ðŸ‡²ðŸ‡ª","Saint Martin (French part)":"ðŸ‡²ðŸ‡«",Madagascar:"ðŸ‡²ðŸ‡¬","Marshall Islands":"ðŸ‡²ðŸ‡­","North Macedonia":"ðŸ‡²ðŸ‡°",Mali:"ðŸ‡²ðŸ‡±",Myanmar:"ðŸ‡²ðŸ‡²",Mongolia:"ðŸ‡²ðŸ‡³","Macao (SAR of China)":"ðŸ‡²ðŸ‡´","Northern Mariana Islands":"ðŸ‡²ðŸ‡µ",Martinique:"ðŸ‡²ðŸ‡¶",Mauritania:"ðŸ‡²ðŸ‡·",Montserrat:"ðŸ‡²ðŸ‡¸",Malta:"ðŸ‡²ðŸ‡¹",Mauritius:"ðŸ‡²ðŸ‡º",Maldives:"ðŸ‡²ðŸ‡»",Malawi:"ðŸ‡²ðŸ‡¼",Mexico:"ðŸ‡²ðŸ‡½",Malaysia:"ðŸ‡²ðŸ‡¾",Mozambique:"ðŸ‡²ðŸ‡¿",Namibia:"ðŸ‡³ðŸ‡¦","New Caledonia":"ðŸ‡³ðŸ‡¨",Niger:"ðŸ‡³ðŸ‡ª","Norfolk Island":"ðŸ‡³ðŸ‡«",Nigeria:"ðŸ‡³ðŸ‡¬",Nicaragua:"ðŸ‡³ðŸ‡®",Netherlands:"ðŸ‡³ðŸ‡±",Norway:"ðŸ‡³ðŸ‡´",Nepal:"ðŸ‡³ðŸ‡µ",Nauru:"ðŸ‡³ðŸ‡·","New Zealand":"ðŸ‡³ðŸ‡¿",Oman:"ðŸ‡´ðŸ‡²",Panama:"ðŸ‡µðŸ‡¦",Peru:"ðŸ‡µðŸ‡ª","French Polynesia":"ðŸ‡µðŸ‡«","Papua New Guinea":"ðŸ‡µðŸ‡¬",Philippines:"ðŸ‡µðŸ‡­",Pakistan:"ðŸ‡µðŸ‡°",Poland:"ðŸ‡µðŸ‡±","Saint Pierre and Miquelon":"ðŸ‡µðŸ‡²",Pitcairn:"ðŸ‡µðŸ‡³","Puerto Rico":"ðŸ‡µðŸ‡·","Palestinian Territory":"ðŸ‡µðŸ‡¸",Portugal:"ðŸ‡µðŸ‡¹",Palau:"ðŸ‡µðŸ‡¼",Paraguay:"ðŸ‡µðŸ‡¾",Qatar:"ðŸ‡¶ðŸ‡¦",Reunion:"ðŸ‡·ðŸ‡ª",Romania:"ðŸ‡·ðŸ‡´",Serbia:"ðŸ‡·ðŸ‡¸",Russia:"ðŸ‡·ðŸ‡º",Rwanda:"ðŸ‡·ðŸ‡¼","Saudi Arabia":"ðŸ‡¸ðŸ‡¦","Solomon Islands":"ðŸ‡¸ðŸ‡§",Seychelles:"ðŸ‡¸ðŸ‡¨",Sudan:"ðŸ‡¸ðŸ‡©",Sweden:"ðŸ‡¸ðŸ‡ª",Singapore:"ðŸ‡¸ðŸ‡¬","Saint Helena":"ðŸ‡¸ðŸ‡­",Slovenia:"ðŸ‡¸ðŸ‡®","Svalbard and Jan Mayen":"ðŸ‡¸ðŸ‡¯",Slovakia:"ðŸ‡¸ðŸ‡°","Sierra Leone":"ðŸ‡¸ðŸ‡±","San Marino":"ðŸ‡¸ðŸ‡²",SÃ©nÃ©gal:"ðŸ‡¸ðŸ‡³",Somalia:"ðŸ‡¸ðŸ‡´",Suriname:"ðŸ‡¸ðŸ‡·","SÃ£o TomÃ© and PrÃ­ncipe":"ðŸ‡¸ðŸ‡¹","El Salvador":"ðŸ‡¸ðŸ‡»","Sint Maarten (Dutch part)":"ðŸ‡¸ðŸ‡½","Syrian Arab Republic":"ðŸ‡¸ðŸ‡¾",Eswatini:"ðŸ‡¸ðŸ‡¿","Turks and Caicos Islands":"ðŸ‡¹ðŸ‡¨",Chad:"ðŸ‡¹ðŸ‡©","French Southern Territories":"ðŸ‡¹ðŸ‡«",Togo:"ðŸ‡¹ðŸ‡¬",Thailand:"ðŸ‡¹ðŸ‡­",Tajikistan:"ðŸ‡¹ðŸ‡¯",Tokelau:"ðŸ‡¹ðŸ‡°","Timor-Leste":"ðŸ‡¹ðŸ‡±",Turkmenistan:"ðŸ‡¹ðŸ‡²",Tunisia:"ðŸ‡¹ðŸ‡³",Tonga:"ðŸ‡¹ðŸ‡´",Turkey:"ðŸ‡¹ðŸ‡·","Trinidad and Tobago":"ðŸ‡¹ðŸ‡¹",Tuvalu:"ðŸ‡¹ðŸ‡»",Taiwan:"ðŸ‡¹ðŸ‡¼",Tanzania:"ðŸ‡¹ðŸ‡¿",Ukraine:"ðŸ‡ºðŸ‡¦",Uganda:"ðŸ‡ºðŸ‡¬","United States":"ðŸ‡ºðŸ‡¸",Uruguay:"ðŸ‡ºðŸ‡¾",Uzbekistan:"ðŸ‡ºðŸ‡¿","Vatican City":"ðŸ‡»ðŸ‡¦","Saint Vincent and the Grenadines":"ðŸ‡»ðŸ‡¨",Venezuela:"ðŸ‡»ðŸ‡ª","British Virgin Islands":"ðŸ‡»ðŸ‡¬","US Virgin Islands":"ðŸ‡»ðŸ‡®","Viet Nam":"ðŸ‡»ðŸ‡³",Vanuatu:"ðŸ‡»ðŸ‡º","Wallis and Futuna":"ðŸ‡¼ðŸ‡«",Samoa:"ðŸ‡¼ðŸ‡¸",Yemen:"ðŸ‡¾ðŸ‡ª",Mayotte:"ðŸ‡¾ðŸ‡¹","South Africa":"ðŸ‡¿ðŸ‡¦",Zambia:"ðŸ‡¿ðŸ‡²",Zimbabwe:"ðŸ‡¿ðŸ‡¼"};r()}catch(E){r(E)}}))},880:(e,t,n)=>{n.d(t,{N:()=>o,f:()=>a});var r=!0;function o(e,t,n,o,a){document.getElementById("errorPopupDisable").style.display=a?"none":"flex",(r||o)&&(document.getElementById("errorTitle").innerHTML="<h2>".concat(e,"</h2>"),document.getElementById("popup-description").innerHTML='<p class="slightBottomMargin">'.concat(t,"</p>"),n&&(document.getElementById("popup-description").innerHTML+='<p class="errorCode">'.concat(n,"</p>")),document.getElementById("errorPopup").style.display="flex",document.getElementById("popupClose").innerHTML=o?"Reload":"Close")}function a(){document.getElementById("errorPopup").style.display="none","Close"!=document.getElementById("popupClose").innerHTML&&(localStorage.setItem("selectedCategory","standard"),location.reload())}try{var i=document.getElementById("hideErrors");i.checked=!1,i.addEventListener("change",(function(e){r=!e.currentTarget.checked}))}catch(e){console.warn("Error checkbox does not exist on this page")}},340:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{$6:()=>L,A0:()=>W,UP:()=>k,on:()=>O,wY:()=>_,zx:()=>F});var o=n(560),a=n(256),i=n(880),c=n(960),s=n(911),l=n(47),u=n(49),d=e([o,a,c,s,l]);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function E(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new P(r||[]);return o(i,"_invoke",{value:T(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function b(){}function w(){}var x={};l(x,i,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(_([])));k&&k!==n&&r.call(k,i)&&(x=k);var B=w.prototype=g.prototype=Object.create(x);function L(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==v(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=C(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(v(t)+" is not iterable")}return b.prototype=w,o(B,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,s,"GeneratorFunction")),e.prototype=Object.create(B),e},t.awrap=function(e){return{__await:e}},L(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(B),l(B,s,"Generator"),l(B,i,(function(){return this})),l(B,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function b(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,c,"next",e)}function c(e){b(a,r,o,i,c,"throw",e)}i(void 0)}))}}[o,a,c,s,l]=d.then?(await d)():d;var p=document.getElementById("playerSearchBox");function x(){return I.apply(this,arguments)}function I(){return(I=w(E().mark((function e(){var t,n,r,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.innerHTML='<p class="playerSearchError">Searching...</p>',e.prev=1,t=document.getElementById("friendBrowserInput").value){e.next=6;break}return p.innerHTML='<p class="playerSearchError">Query cannot be empty.</p>',e.abrupt("return");case 6:return e.next=8,fetch("https://friends.openguessr.com/friends/search/"+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 8:if(!(n=e.sent).ok){e.next=25;break}return e.prev=10,e.next=13,n.json();case 13:r=e.sent,o=0,p.innerHTML="",r.users.forEach((function(e){o++;var t=document.createElement("div");t.classList.add("friendSearchItem"),t.innerHTML="\n                    <p>".concat(e.user_name,'</p>\n                    <button id="sendFriendRequest').concat(o,'" class="sendFriendRequestBrowser standardButton">\n                        Send request +\n                    </button>'),e.id==localStorage.getItem("id")&&t.classList.add("friendSearchYou"),t.id="friendSearchEntry"+o,p.appendChild(t),document.getElementById("sendFriendRequest"+o).addEventListener("click",(function(t){t.stopPropagation(),(0,u.Ak)("basic_button"),k(e.id,t.target)})),document.getElementById("friendSearchEntry"+o).addEventListener("click",(function(){(0,l.nk)(e.id,!1,!0)}))})),p.innerHTML||(p.innerHTML='<p class="playerSearchError">No results.</p>'),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),console.error("In-Code error loading user browser: "+e.t0);case 23:e.next=27;break;case 25:console.error("Error loading the user browser: "+n.status),p.innerHTML='<p class="playerSearchError">Error: '.concat(n.status,"</p>");case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(1),console.error("Fetch/Network error occurred while loading user browser results: ",e.t1),p.innerHTML='<p class="playerSearchError">Network error: '.concat(e.t1,"</p>");case 33:case"end":return e.stop()}}),e,null,[[1,29],[10,20]])})))).apply(this,arguments)}function k(e,t){return B.apply(this,arguments)}function B(){return(B=w(E().mark((function e(t,n){var r,o,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return r={id:localStorage.getItem("id"),senderId:localStorage.getItem("id"),recipientId:t,senderName:localStorage.getItem("username")},e.next=6,fetch("https://friends.openguessr.com/friends/send",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(r)});case 6:if(!(o=e.sent).ok){e.next=12;break}(0,c.Ds)("Friend request sent.",!1,!1,!1);try{n.style.opacity="0.5",n.style.pointerEvents="none"}catch(e){console.error("Error changing button style after friend reqeust:",e)}e.next=17;break;case 12:return e.next=14,o.json();case 14:a=e.sent,console.error("Error sending the friend request: "+o.status),(0,i.N)("Error sending friend request","The server returned an error for your friend request.",o.status+" - "+a.error,!1,!1);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),console.error("Fetch/Network error occurred while sending the friend request: ",e.t0),(0,i.N)("Network error sending friend request","The friend request couldn't be sent.",e.t0,!1,!1);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}document.getElementById("browseUsersFriends").addEventListener("click",(function(){(0,u.Ak)("basic_button"),o.wR?(p.innerHTML='<p class="playerSearchError">Input a query.</p>',document.getElementById("friendBrowserInput").value="",document.getElementById("friendBrowserPopup").style.display="flex"):((0,s.qf)("close"),(0,c.rP)("/signup.html",!0))})),document.getElementById("friendBrowserClose").addEventListener("click",(function(){(0,u.Ak)("basic_button"),document.getElementById("friendBrowserPopup").style.display="none"})),document.getElementById("friendBrowserInput").addEventListener("keydown",(function(e){"Enter"===e.key&&e.preventDefault()})),document.getElementById("friendBrowserInput").addEventListener("keyup",(function(e){"Enter"===e.key&&x()})),document.getElementById("startFriendSearch").addEventListener("click",x);var m,y=document.getElementById("openFriendInbox"),f=document.getElementById("friendInbox");function L(e){document.getElementById("inboxIcon").src=e?"/IMG/inbox_icon_new.png":"/IMG/inbox_icon.png"}function S(e){return T.apply(this,arguments)}function T(){return(T=w(E().mark((function e(t){var n,r,o,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(f.innerHTML='<p class="playerSearchError">Loading...</p>'),e.prev=1,n={id:localStorage.getItem("id"),recipientId:localStorage.getItem("id")},e.next=5,fetch("https://friends.openguessr.com/friends/requests",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:if(!(r=e.sent).ok){e.next=22;break}return e.prev=7,e.next=10,r.json();case 10:o=e.sent,a=0,f.innerHTML="",o.requests.forEach((function(e){a++;var t=document.createElement("div");t.classList.add("friendSearchItem"),t.innerHTML="\n                    <p>".concat(e.user_name,'</p>\n                    <div class="inboxItemButtons">\n                        <button id="acceptFriendRequest').concat(a,'" class="manageFriendRequest standardButton">\n                            Accept\n                        </button>\n                        <button id="declineFriendRequest').concat(a,'" class="manageFriendRequest standardButton">\n                            Decline\n                        </button>\n                    </div>'),t.id="friendInboxEntry"+a,f.appendChild(t),document.getElementById("acceptFriendRequest"+a).addEventListener("click",(function(t){t.stopPropagation(),(0,u.Ak)("basic_button"),C(e.id)})),document.getElementById("declineFriendRequest"+a).addEventListener("click",(function(t){t.stopPropagation(),(0,u.Ak)("basic_button"),M(e.id)})),document.getElementById("friendInboxEntry"+a).addEventListener("click",(function(){(0,l.nk)(e.id,!1,!0)}))})),f.innerHTML||(f.innerHTML='<p class="playerSearchError">Your inbox is empty.</p>'),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.error("In-Code error loading inbox: "+e.t0);case 20:e.next=24;break;case 22:console.error("Error loading inbox: "+r.status),f.innerHTML='<p class="playerSearchError">Error: '.concat(r.status,"</p>");case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(1),console.error("Fetch/Network error occurred while loading inbox: ",e.t1),f.innerHTML='<p class="playerSearchError">Network error: '.concat(e.t1,"</p>");case 30:case"end":return e.stop()}}),e,null,[[1,26],[7,17]])})))).apply(this,arguments)}function C(e){return A.apply(this,arguments)}function A(){return(A=w(E().mark((function e(t){var n,r,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:localStorage.getItem("id"),senderId:t,recipientId:localStorage.getItem("id")},e.next=4,fetch("https://friends.openguessr.com/friends/accept",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:if(!(r=e.sent).ok){e.next=10;break}S(),_(),e.next=15;break;case 10:return e.next=12,r.json();case 12:o=e.sent,console.error("Error accepting / deleting the friend request: "+r.status),(0,i.N)("Error accepting / deletingfriend request","The server returned an error for your action.",r.status+" - "+o.error,!1,!1);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Fetch/Network error occurred while sending the friend request: ",e.t0),(0,i.N)("Network error accepting / deleting friend request","The friend request couldn't be accepted or deleted.",e.t0,!1,!1);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function M(e){return P.apply(this,arguments)}function P(){return(P=w(E().mark((function e(t){var n,r,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:localStorage.getItem("id"),senderId:t,recipientId:localStorage.getItem("id")},e.next=4,fetch("https://friends.openguessr.com/friends/decline",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:if(!(r=e.sent).ok){e.next=9;break}S(),e.next=14;break;case 9:return e.next=11,r.json();case 11:o=e.sent,console.error("Error accepting / deleting the friend request: "+r.status),(0,i.N)("Error accepting / deletingfriend request","The server returned an error for your action.",r.status+" - "+o.error,!1,!1);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Fetch/Network error occurred while sending the friend request: ",e.t0),(0,i.N)("Network error accepting / deleting friend request","The friend request couldn't be accepted or deleted.",e.t0,!1,!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}y.addEventListener("click",(function(){(0,u.Ak)("basic_button"),o.wR?(f.innerHTML='<p class="playerSearchError">Your inbox is empty.</p>',document.getElementById("friendInboxPopup").style.display="flex",S(!1),L(!1),clearInterval(m),m=setInterval((function(){"flex"==document.getElementById("friendInboxPopup").style.display&&S(!0)}),5e3)):((0,s.qf)("close"),(0,c.rP)("/signup.html",!0))})),document.getElementById("friendInboxClose").addEventListener("click",(function(){(0,u.Ak)("basic_button"),document.getElementById("friendInboxPopup").style.display="none",clearInterval(m)}));var h=document.getElementById("friendBox"),g=document.getElementById("noFriendsText");function _(e){return N.apply(this,arguments)}function N(){return(N=w(E().mark((function e(t){var n,r,o,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g.textContent="Loading...",t&&(h.innerHTML="",h.style.maxHeight="50px"),n={id:localStorage.getItem("id")},e.next=6,fetch("https://friends.openguessr.com/friends/friends",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:if(!(r=e.sent).ok){e.next=24;break}return e.prev=8,e.next=11,r.json();case 11:o=e.sent,a=0,h.innerHTML="",o.friends.forEach((function(e){a++;var t=document.createElement("div");t.classList.add("friendItem"),t.classList.add("standardButton");var n=e.online?'<div class="friendOnlineBar"></div>':"";t.innerHTML="\n                    ".concat(n,"\n                    <p>").concat(e.user_name,'</p>\n                    <button id="duelFriend').concat(a,'" class="standardButton friendItemButtons">\n                        1v1\n                    </button>\n                    <button id="removeFriend').concat(a,'" class="standardButton friendItemButtons">\n                        <img alt="remove friend" class="friendRemoveIcon" src="/IMG/delete_icon.png">\n                    </button>\n                    '),t.id="friendEntry"+a,h.appendChild(t),document.getElementById("friendEntry"+a).addEventListener("click",(function(){(0,l.nk)(e.id,!1,!0)})),document.getElementById("removeFriend"+a).addEventListener("click",(function(t){t.stopPropagation(),(0,c.WV)("Remove friend?","You are about to remove your friend from your list. Your friend will see this and might not like it. Use this at our own risk.",(function(){G(e.id)}))})),document.getElementById("duelFriend"+a).addEventListener("click",(function(t){t.stopPropagation(),F(e.id,!0)}))})),setTimeout((function(){h.style.maxHeight=""}),50),h.innerHTML?(g.style.display="none",document.getElementById("friendBox").style.display="flex"):(g.textContent="You haven't added any friends.",g.style.display="block",document.getElementById("friendBox").style.display="none"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),console.error("In-Code error loading friends: "+e.t0);case 22:e.next=27;break;case 24:console.error("Error loading friends: "+r.status),g.textContent="Error loading friends: "+r.status,g.style.display="block";case 27:e.next=34;break;case 29:e.prev=29,e.t1=e.catch(0),console.error("Fetch/Network error occurred while loading friends: ",e.t1),g.textContent="An error occured loading your friends.",g.style.display="block";case 34:case"end":return e.stop()}}),e,null,[[0,29],[8,19]])})))).apply(this,arguments)}function O(e){return j.apply(this,arguments)}function j(){return(j=w(E().mark((function e(t){var n,r,o,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:localStorage.getItem("id")},e.next=4,fetch("https://friends.openguessr.com/friends/friends",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:if(!(r=e.sent).ok){e.next=19;break}return e.prev=6,e.next=9,r.json();case 9:return o=e.sent,a=o.friends.some((function(e){return e.id===t})),e.abrupt("return",a);case 14:e.prev=14,e.t0=e.catch(6),console.error("In-Code error loading friends to check friendship state: "+e.t0);case 17:e.next=21;break;case 19:return console.error("Error loading friends to check friendship state: "+r.status),e.abrupt("return",!1);case 21:e.next=27;break;case 23:return e.prev=23,e.t1=e.catch(0),console.error("Fetch/Network error occurred while loading friends: ",e.t1),e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,null,[[0,23],[6,14]])})))).apply(this,arguments)}function G(e){return R.apply(this,arguments)}function R(){return(R=w(E().mark((function e(t){var n,r,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:localStorage.getItem("id"),friendId:t},e.next=4,fetch("https://friends.openguessr.com/friends/remove",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:if(!(r=e.sent).ok){e.next=9;break}_(!1),e.next=14;break;case 9:return e.next=11,r.json();case 11:o=e.sent,console.error("Error removing friend: "+r.status),(0,i.N)("Error removing friend","The server returned an error for your action.",r.status+" - "+o.error,!1,!1);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Fetch/Network error occurred while removing friend: ",e.t0),(0,i.N)("Network error removing friend","The friend request couldn't be accepted or deleted.",e.t0,!1,!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function F(e,t){return H.apply(this,arguments)}function H(){return(H=w(E().mark((function e(t,n){var r,o,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={id:localStorage.getItem("id"),friend_id:t,roomcode:s.cl,senderName:localStorage.getItem("username"),isDuel:n},e.next=4,fetch("https://friends.openguessr.com/friends/send-invite",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if(!(o=e.sent).ok){e.next=9;break}(0,c.Ds)("Invite sent.",!1,!1,!1),e.next=14;break;case 9:return e.next=11,o.json();case 11:a=e.sent,console.error("Error sending invite: "+o.status+", "+a.error),(0,c.Ds)("User is not reachable.",!1,!1,!1);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Fetch/Network error occurred while sending/accepting/declining invite: ",e.t0),(0,i.N)("Network error sending invite","The invite couldn't be sent due to a network problem.",e.t0,!1,!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function D(e){return q.apply(this,arguments)}function q(){return(q=w(E().mark((function e(t){var n,r,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:localStorage.getItem("id"),friend_id:t,senderName:localStorage.getItem("username")},e.next=4,fetch("https://friends.openguessr.com/friends/accept-invite",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:if(!(r=e.sent).ok){e.next=8;break}e.next=13;break;case 8:return e.next=10,r.json();case 10:o=e.sent,console.error("Error accepting invite: "+r.status),(0,i.N)("Error accepting invite","The server returned an error for your action.",r.status+" - "+o.error,!1,!1);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Fetch/Network error occurred while sending/accepting/declining invite: ",e.t0),(0,i.N)("Network error sending/accepting/declining invite","The invite couldn't be sent / accepted / declined.",e.t0,!1,!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function z(e){return U.apply(this,arguments)}function U(){return(U=w(E().mark((function e(t){var n,r,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:localStorage.getItem("id"),friend_id:t,senderName:localStorage.getItem("username")},e.next=4,fetch("https://friends.openguessr.com/friends/decline-invite",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:if(!(r=e.sent).ok){e.next=8;break}e.next=13;break;case 8:return e.next=10,r.json();case 10:o=e.sent,console.error("Error declining invite: "+r.status),(0,i.N)("Error declining invite","The server returned an error for your action.",r.status+" - "+o.error,!1,!1);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Fetch/Network error occurred while sending/accepting/declining invite: ",e.t0),(0,i.N)("Network error sending/accepting/declining invite","The invite couldn't be sent / accepted / declined.",e.t0,!1,!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function W(){return J.apply(this,arguments)}function J(){return J=w(E().mark((function e(){var t,n,r,o,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){return(a=w(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(t=new WebSocket("wss://friends.openguessr.com")).onopen=function(){n=0,t.send(JSON.stringify({id:localStorage.getItem("id")}))},t.onmessage=function(e){var t=JSON.parse(e.data);if("room-invite"===t.type){var n=t.duel?"Duel":"Room";(0,c.Ds)("".concat(n," invite from ").concat(t.name,"."),(function(){Y(t.roomcode,t.from,t.duel)}),(function(){z(t.from)}),!0)}else"invite-accepted"===t.type?$():"invite-declined"===t.type?(0,c.Ds)("".concat(t.name," declined your invite."),!1,!1,!1):"friend-request-received"===t.type&&(0,c.Ds)("".concat(t.name," sent you a friend request."),(function(){C(t.from)}),!1,!0)},t.onclose=function(){n<r?(n++,console.warn("WebSocket closed. Attempting to reconnect (".concat(n,"/").concat(r,")...")),setTimeout((function(){o()}),500)):(console.error("Max reconnect attempts reached. Could not reconnect. Re-attempting approx. every minute from now on."),setTimeout((function(){o()}),6e4+Math.floor(1e4*Math.random())))},t.onerror=function(e){console.error("WebSocket encountered an error: ",e.message),t.close()}}catch(e){console.error("Error in websocket friends code:",e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(){return a.apply(this,arguments)},n=0,r=5,o();case 5:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function Y(e,t,n){var r=10;n&&(D(t),r=1e3),setTimeout((function(){(0,s.y4)(),(0,a.jE)(!1),n&&((0,s.cA)(!0),(0,s.PD)(!0)),(0,s.H2)(!0),(0,s.O3)(e.replace("openguessr_",""))}),r)}function $(){(0,s.y4)(),(0,a.jE)(!1),(0,s.cA)(!0),(0,s.PD)(!0),(0,s.N0)(5,60),(0,s.qf)("close")}r()}catch(V){r(V)}}))},709:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{H:()=>E,a:()=>b});var o=n(108),a=n(49),i=e([o]);o=(i.then?(await i)():i)[0];var c,s,l,u=!1,d=0,p=2500,m=document.getElementById("hardModeFade"),y=document.getElementById("timerButton"),f=document.getElementById("timerIcon");function v(){switch(d){case 0:default:E(!1),f.src="/IMG/timer_icon.png";break;case 1:E(!0),p=2500,f.src="/IMG/timer_icon_1s.png";break;case 2:E(!0),p=5500,f.src="/IMG/timer_icon_5s.png"}localStorage.setItem("hardmodeTimeout",d)}function E(e){u=e,m.style.visibility=u?"visible":"hidden",e||(f.src="/IMG/timer_icon.png",d=0,localStorage.setItem("hardmodeTimeout",d))}d=null!=localStorage.getItem("hardmodeTimeout")?d=Number(localStorage.getItem("hardmodeTimeout")):0,v(),y.addEventListener("click",(function(){(0,a.Ak)("basic_button"),++d>2&&(d=0),v(),(0,o.JS)()}));var h=document.getElementById("hardModeTitle"),g=document.getElementById("hardModeSubtitle");document.getElementById("resetButtonSVG");function b(){m.style.opacity="0",m.style.pointerEvents="none",u&&(clearTimeout(c),clearTimeout(s),clearInterval(l),new Promise((function(e,t){m.style.opacity="100%",m.style.pointerEvents="auto",g.innerText="Get ready...",h.innerText="Starting in 3";var n=2;l=setInterval((function(){h.innerText="Starting in "+n,n--}),700),s=setTimeout((function(){e("start"),clearInterval(l)}),2e3)})).then((function(){m.style.opacity="0",m.style.pointerEvents="none",c=setTimeout((function(){m.style.opacity="100%",h.innerText="The time is up!",m.style.pointerEvents="auto",g.innerText="Please take your guess."}),p)})))}r()}catch(w){r(w)}}))},678:(e,t,n)=>{n.d(t,{$2:()=>s,PD:()=>r,QS:()=>c});var r=!1,o=document.getElementById("imageGuesserOverlay"),a=document.getElementById("imageGuesserImage"),i=document.getElementById("imageGuesserBackground");function c(e){r=e,e?(document.getElementById("imageGuesserOverlay").style.display="flex",o.style.opacity="1",o.style.pointerEvents="auto",a.style.transform="rotate("+Math.floor(10*Math.random()-5)+"deg)",a.classList.add("guessImageLoading"),i.classList.add("guessImageLoading"),a.style.backgroundImage="",i.style.backgroundImage=""):(document.getElementById("imageGuesserOverlay").style.display="none",o.style.opacity="0",o.style.pointerEvents="none")}function s(e){var t=new Image;t.src=e,t.onload=function(){a.style.backgroundImage="url(".concat(e,")"),i.style.backgroundImage="url(".concat(e,")"),setTimeout((function(){a.classList.remove("guessImageLoading"),i.classList.remove("guessImageLoading")}),200)}}a.addEventListener("mouseenter",(function(e){var t=e.target;t.style.transform+=" scale(1.01)"})),a.addEventListener("mouseleave",(function(e){var t=e.target;t.style.transform=t.style.transform.replace(" scale(1.01)","")}))},414:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{L:()=>I});var o=n(880),a=n(911),i=n(108),c=n(256),s=e([a,i,c]);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new P(r||[]);return o(i,"_invoke",{value:T(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function v(){}function w(){}var x={};l(x,i,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(_([])));k&&k!==n&&r.call(k,i)&&(x=k);var B=w.prototype=g.prototype=Object.create(x);function L(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==E(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=C(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(E(t)+" is not iterable")}return v.prototype=w,o(B,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=l(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,s,"GeneratorFunction")),e.prototype=Object.create(B),e},t.awrap=function(e){return{__await:e}},L(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(B),l(B,s,"Generator"),l(B,i,(function(){return this})),l(B,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function w(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))}}function I(e){return k.apply(this,arguments)}function k(){return(k=x(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("BeforeOverlay").style.opacity="100",document.getElementById("BeforeOverlay").style.visibility="visible","JSON"!=t){e.next=8;break}return e.next=5,S(i.BI);case 5:return e.abrupt("return",e.sent);case 8:if("SDK"!=t){e.next=14;break}return e.next=11,C();case 11:return e.abrupt("return",e.sent);case 14:if("FROMHOST"!=t){e.next=18;break}return e.abrupt("return",a.LV);case 18:if("COMMUNITY"!=t){e.next=24;break}return e.next=21,O();case 21:return e.abrupt("return",e.sent);case 24:if("COMPETITION"!=t){e.next=30;break}return e.next=27,F();case 27:return e.abrupt("return",e.sent);case 30:console.error("Incorrect Location type set in locationGeneration.js");case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}[a,i,c]=s.then?(await s)():s;var l,u,d,p=[],m=[];function B(e){return L.apply(this,arguments)}function L(){return(L=x(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u==t){e.next=21;break}return e.prev=1,n=null,e.next=5,fetch("./JSON/"+t+"Locations.json");case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("JSON fetch failed.");case 8:return e.next=10,n.json();case 10:l=e.sent,u=t,m=[],p=l.locations,e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),localStorage.setItem("selectedCategory","standard"),window.location.reload(),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=x(b().mark((function e(t){var n,r,o,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u==t){e.next=9;break}return e.prev=1,e.next=4,B(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Error loading location json in getCoordsFromJson in locationGeneration.js: "+e.t0);case 9:try{do{d=Math.floor(Math.random()*p.length)}while(m.includes(d));m.unshift(d),m.length>p.length/2&&m.pop(),r=Number(p[d][0]),o=Number(p[d][1]),a=p[d][2],n=[r,o,a]}catch(e){console.error("Error in locationGeneration.js during JSON Gen: "+e)}return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}var y=null,f=[];function C(){return A.apply(this,arguments)}function A(){return(A=x(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=30;break}return e.prev=1,"https://locations.openguessr.com/locations",e.next=5,fetch("https://locations.openguessr.com/locations",{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if(!(t=e.sent).ok){e.next=16;break}return e.next=9,t.json();case 9:return n=e.sent,y=n.locations,e.next=13,M();case 13:case 19:case 27:case 32:return e.abrupt("return",e.sent);case 16:return console.error("Location fetch failed. Server returned error:",t.status),e.next=19,_(t.status);case 20:e.next=28;break;case 22:return e.prev=22,e.t0=e.catch(1),console.error("Error occurred while fetching locations from server: ",e.t0),e.next=27,_(e.t0);case 28:e.next=33;break;case 30:return e.next=32,M();case 33:case"end":return e.stop()}}),e,null,[[1,22]])})))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=x(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];try{do{d=Math.floor(Math.random()*y.length)}while(f.includes(d));f.unshift(d),f.length>y.length/2&&f.pop(),n=Number(y[d][0]),r=Number(y[d][1]),t=[n,r]}catch(e){console.error("Error in locationGeneration.js Standard Location JSON generation: "+e)}return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return N.apply(this,arguments)}function N(){return(N=x(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading backup locations."),(0,o.N)("Location server error","Loading local backup locations instead. ","Error: "+t),e.next=4,S("backup");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=null,g=[],v="";function O(){return j.apply(this,arguments)}function j(){return(j=x(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v===i.BI&&h){e.next=29;break}return e.prev=1,e.next=4,fetch("https://maps.openguessr.com/maps/"+i.BI.replace("community_",""),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:if(!(t=e.sent).ok){e.next=17;break}return e.next=8,t.json();case 8:return n=e.sent,v=i.BI,h=n.map_data.locations,g=[],e.next=14,G();case 14:case 31:return e.abrupt("return",e.sent);case 17:return console.error("Community map fetch failed. Server returned error:",t.status),404==t.status?(0,o.N)("Community map was deleted","This map was likely deleted and cannot be found.",t.status,!0):(0,o.N)("Error loading community map","An error occured on the maps server.",t.status,!0),e.abrupt("return",null);case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(1),console.error("Error occurred while fetching map from server: ",e.t0),(0,o.N)("Error loading community map","The maps server can't be reached.",e.t0,!0),e.abrupt("return",null);case 27:e.next=32;break;case 29:return e.next=31,G();case 32:case"end":return e.stop()}}),e,null,[[1,22]])})))).apply(this,arguments)}function G(){return R.apply(this,arguments)}function R(){return(R=x(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];try{do{d=Math.floor(Math.random()*h.length)}while(g.includes(d));g.unshift(d),g.length>h.length/2&&g.pop(),n=Number(h[d][0]),r=Number(h[d][1]),t=[n,r]}catch(e){console.error("Error in locationGeneration.js Community map location JSON generation: "+e)}return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return H.apply(this,arguments)}function H(){return(H=x(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];try{n=c.qm.locations[c.Y6][0],r=c.qm.locations[c.Y6][1],t=[n,r]}catch(e){console.error("Error in locationGeneration.js in getCompetitionCoordinates: "+e)}return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r()}catch(D){r(D)}}))},390:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{$U:()=>z,FB:()=>A,cN:()=>q,gX:()=>_,id:()=>j,qE:()=>F,r3:()=>C,rb:()=>E,ti:()=>P,yT:()=>b});var o=n(252),a=n(47),i=n(960),c=n(414),s=n(709),l=n(911),u=n(211),d=n(49),p=n(256),m=n(678),y=e([o,a,i,c,s,l,u,p]);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function k(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */k=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new P(r||[]);return o(i,"_invoke",{value:T(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function v(){}function E(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(_([])));x&&x!==n&&r.call(x,i)&&(b=x);var B=E.prototype=g.prototype=Object.create(b);function L(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==I(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=C(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(I(t)+" is not iterable")}return v.prototype=E,o(B,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:v,configurable:!0}),v.displayName=l(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,l(e,s,"GeneratorFunction")),e.prototype=Object.create(B),e},t.awrap=function(e){return{__await:e}},L(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(B),l(B,s,"Generator"),l(B,i,(function(){return this})),l(B,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function B(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){B(a,r,o,i,c,"next",e)}function c(e){B(a,r,o,i,c,"throw",e)}i(void 0)}))}}[o,a,i,c,s,l,u,p]=y.then?(await y)():y;var f,h,g,v,E=0,b=0,w=null;function S(){return T.apply(this,arguments)}function T(){return(T=L(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./JSON/countries.json");case 2:return t=e.sent,e.next=5,t.json();case 5:w=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){try{var n=w.grid_size,r=Math.floor(e/n),o=Math.floor(t/n),a="".concat(r,",").concat(o);return w.data[a]||"Unknown"}catch(e){return console.error("Error getting country from coords: "+e),"Uknknown"}}function A(e){return M.apply(this,arguments)}function M(){return(M=L(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.L)(t);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Invalid location generation type in main.js / generateNewLocation. Error: "+e.t0);case 9:try{E=Number(n[0]),b=Number(n[1]),u.at&&!l.$s&&(0,u.F5)(n[2]),m.PD&&!l.$s&&(0,m.$2)(n[2])}catch(e){console.error("The coordinates to load the iframe from are not defined. Lat: "+E+" Long: "+b)}D(E,b),l.$s&&l.jU&&(0,l.X8)(E,b);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function P(e,t){var n=E*Math.PI/180,r=b*Math.PI/180,o=e*Math.PI/180,a=o-n,i=t*Math.PI/180-r,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n)*Math.cos(o)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}function _(e){var t,n;if(!i.Lv)return f=["Rainbolt?","How?","Impressive.","Do you have an A in geography?","Wow.","Time for a screenshot.","Seriously impressive."],h=["Wow, that was very close!","You're good at this.","Very close!","Almost there!","Yup, that was impressive.","That's how it's done!"],g=["Distance is relative. Here, relatively big.","You'll get it next time!","At least it was on the correct planet.","It could have been worse."],v=e<1e3&&!(e<5)?h[Math.floor(Math.random()*h.length)]:g[Math.floor(Math.random()*g.length)],e<5?(t=Math.round(1e3*e),"miles"==i.MH&&(t=Math.round(1.09361*t)),t=t.toLocaleString(),n="miles"==i.MH?t+" yards":t+" m",v=f[Math.floor(Math.random()*f.length)]):(t=Math.round(10*e)/10,"miles"==i.MH&&(t=Math.round(.621371*t*10)/10),t=t.toLocaleString(),n="miles"==i.MH?t+" miles":t+" km"),u.at&&!l.$s&&(v=(0,u.YV)()?f[Math.floor(Math.random()*f.length)]:g[Math.floor(Math.random()*g.length)]),{resultAsString:n,extraMsg:v}}function N(){return O.apply(this,arguments)}function O(){return(O=L(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return document.addEventListener("mapInitialized",(function(){e()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return G.apply(this,arguments)}function G(){return(G=L(k().mark((function e(t,n){var r,i,c,s,d,p,m,y,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.Tj){e.next=7;break}return(0,o.BD)(),e.next=4,N();case 4:if(o.Tj){e.next=7;break}return console.error("Map not properly inizialized - exiting result map load function."),e.abrupt("return");case 7:o.Tj.setCenter({lat:E,lng:b}),o.Tj.setZoom(3),r={url:"./IMG/your_marker"+a.n9+".png",size:new google.maps.Size(35,35),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17.5,34),scaledSize:new google.maps.Size(35,35)},i={url:"./IMG/result_marker.png",size:new google.maps.Size(35,35),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17.5,34),scaledSize:new google.maps.Size(35,35)},c=new google.maps.LatLng(E,b),u.at&&!l.$s||(s=new google.maps.LatLng(t,n),(d=new google.maps.LatLngBounds).extend(c),d.extend(s),p=new google.maps.Marker({position:s,map:o.Tj,icon:r}),o.S8.push(p),m=new google.maps.InfoWindow({content:"You"}),p.addListener("click",(function(){m.open(o.Tj,p)})),y=new google.maps.Polyline({path:[c,s],map:o.Tj,strokeWeight:1,strokeColor:"black"}),o.S8.push(y)),l.$s&&l.rP.forEach((function(e){var r=e[0],a=e[1],i=e[2],s=e[3];if((null==r||null==a||isNaN(r))&&(r=0,a=0),null==i&&(i=0,console.error("Provided maker pin index form peer is null")),r!=t||a!=n){var l={url:"./IMG/your_marker"+i+".png",size:new google.maps.Size(35,35),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17.5,34),scaledSize:new google.maps.Size(35,35)},u=new google.maps.LatLng(r,a),d=new google.maps.Marker({position:u,map:o.Tj,icon:l});o.S8.push(d);var p=new google.maps.InfoWindow({content:s});d.addListener("click",(function(){p.open(o.Tj,d)}));var m=new google.maps.Polyline({path:[c,u],strokeColor:"black",strokeWeight:1,strokeOpacity:.25,map:o.Tj});o.S8.push(m)}})),u.at&&!l.$s||(o.Tj.fitBounds(d,{padding:{top:150,right:250,bottom:150,left:250}}),o.Tj.getZoom()>4?o.Tj.setZoom(o.Tj.getZoom()-2):o.Tj.setZoom(o.Tj.getZoom()-1)),f=new google.maps.Marker({position:{lat:E,lng:b},map:o.Tj,icon:i}),o.S8.push(f),setTimeout(R,1500);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){if("1"==document.getElementById("EndOverlay").style.opacity&&o.Tj){var e=o.Tj.getZoom(),t=Math.min(e+2,o.Tj.maxZoom||21),n={lat:E,lng:b};o.Tj.setZoom(t),o.Tj.setCenter(n)}}function F(e,t,n){return e<=t?t:e>=n?n:e}function H(){(0,d.Ak)("basic_button"),window.open("https://www.google.com/maps/@?api=1&map_action=pano&viewpoint="+E+","+b,"_blank").focus()}S(),document.getElementById("endScreenOpenLocation").addEventListener("click",H);var x="/loader.html";function D(e,t){x=!m.PD||l.$s?"https://www.google.com/maps/embed/v1/streetview?location="+e+","+t+"&key=AIzaSyAHt3QJRBDISRaWaqblQl2VwjWiHvjpgIs&fov=90":"";var n=!0,r=document.getElementById("GuesserWindow"),o=function(){n&&((0,s.a)(),(0,p.sX)()),n=!1,setTimeout((function(){var e=document.getElementById("BeforeOverlay");e.style.opacity="0",e.style.visibility="hidden"}),300)};r.removeEventListener("load",o),r.addEventListener("load",o),r.setAttribute("src",x)}function q(){document.getElementById("BeforeOverlay").style.opacity="100",document.getElementById("BeforeOverlay").style.visibility="visible",document.getElementById("GuesserWindow").setAttribute("src",x),window.setTimeout((function(){document.getElementById("BeforeOverlay").style.opacity="0",document.getElementById("BeforeOverlay").style.visibility="hidden"}),400)}function z(e,t,n){return new Promise((function(r,o){if(window[t])r(n(window[t]));else{var a=document.createElement("script");a.src=e,a.async=!0,a.onload=function(){try{r(n(window[t]))}catch(e){o(new Error("Failed to initialize ".concat(t,": ").concat(e.message)))}},a.onerror=function(){return o(new Error("Failed to load ".concat(e)))},document.head.appendChild(a)}}))}r()}catch(U){r(U)}}))},960:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Ds:()=>Je,G:()=>Ae,L_:()=>ye,Lv:()=>w,MH:()=>_,N8:()=>Oe,Q8:()=>ge,Up:()=>et,Vn:()=>Pe,WV:()=>Ce,XF:()=>J,Zv:()=>Ee,dS:()=>Se,hu:()=>tt,kN:()=>ke,km:()=>Ve,l5:()=>we,qR:()=>ve,rP:()=>rt,ry:()=>he,uc:()=>fe});var o=n(880),a=n(390),i=n(560),c=n(911),s=n(211),l=n(49),u=n(108),d=n(256),p=n(47),m=n(103),y=n(392),f=n(252),h=e([a,i,c,s,u,d,p,f]);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */se=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new A(r||[]);return o(i,"_invoke",{value:L(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function v(){}function E(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==n&&r.call(x,i)&&(b=x);var I=E.prototype=g.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==ce(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=S(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function S(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ce(t)+" is not iterable")}return v.prototype=E,o(I,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:v,configurable:!0}),v.displayName=l(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,l(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},k(B.prototype),l(B.prototype,c,(function(){return this})),t.AsyncIterator=B,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new B(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(I),l(I,s,"Generator"),l(I,i,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function le(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){le(a,r,o,i,c,"next",e)}function c(e){le(a,r,o,i,c,"throw",e)}i(void 0)}))}}[a,i,c,s,u,d,p,f]=h.then?(await h)():h,document.getElementById("helpButton").addEventListener("click",(function(e){e.stopPropagation(),de()}));var g=document.getElementById("helpWindow");function de(){(0,l.Ak)("basic_button"),"block"==g.style.display?(g.style.display="none",document.getElementById("blackBackground").style.visibility="hidden"):(g.style.display="block",document.getElementById("blackBackground").style.visibility="visible")}function pe(){rt("/leaderboard.html")}document.getElementById("helpClose").addEventListener("click",de),document.getElementById("leaderboardButton").addEventListener("click",(function(){(0,l.Ak)("basic_button"),pe()})),document.getElementById("competitionsButton").addEventListener("click",(function(){(0,l.Ak)("basic_button"),rt("/competitions.html")}));var v=document.getElementById("floatingMapButton"),E=!0;function me(){E?(document.getElementById("map").style.maxHeight="0%",E=!1,v.style.marginBottom="0"):(document.getElementById("map").style.maxHeight="100%",E=!0,v.style.marginBottom="10px")}function ye(){window.innerHeight>window.innerWidth&&E&&me()}function fe(e){window.innerHeight>window.innerWidth&&(v.style.visibility=e?"hidden":"visible")}v.addEventListener("click",(function(){me(),(0,l.Ak)("floating_button"),v.style.filter="brightness(0.7)",setTimeout((function(){v.style.filter="brightness(1)"}),250)})),document.getElementById("popupClose").addEventListener("click",(function(){(0,o.f)(),(0,l.Ak)("basic_button")})),document.getElementById("resetButtonSVG").addEventListener("click",(function(){(0,l.Ak)("reload"),(0,a.cN)()})),document.getElementById("redditButton").addEventListener("click",(function(){(0,l.Ak)("basic_button"),window.open("https://www.reddit.com/r/OpenGuessr/","_blank").focus()})),document.getElementById("discordButton").addEventListener("click",(function(){(0,l.Ak)("basic_button"),window.open("https://discord.gg/CSc3MbDrZ8","_blank").focus()})),document.getElementById("privacyButton").addEventListener("click",(function(){(0,l.Ak)("basic_button"),Be(),rt("/legal.html")})),document.getElementById("discoverMaps").addEventListener("click",(function(){(0,l.Ak)("basic_button"),rt("/maps.html")}));var b,w=!1;function he(e,t){if(w)console.log("Result screen already enabled!");else{e=e||0,t=t||0;var n=(0,a.ti)(e,t),r=(0,a.gX)(n),o=r.resultAsString,c=r.extraMsg;(0,i.wb)(n),document.getElementById("EndOverlay").style.opacity="100%",document.getElementById("EndOverlay").style.visibility="visible",document.getElementById("distanceText").innerText=o,document.getElementById("motivationText").innerText=c,(0,y.$)(),s.at&&((0,s.YV)()?(document.getElementById("distanceText").innerText="Correct!",document.getElementById("motivationText").innerText="The country is "+s.q9+"."):(document.getElementById("distanceText").innerText="Wrong!",document.getElementById("motivationText").innerText="The country was "+s.q9+".")),(0,f.eL)(),document.getElementById("mapHolder").classList.add("mapHolderToResult"),document.getElementById("map").classList.add("mapFullOpacity"),(0,a.id)(e,t),(0,l.Ak)("confirm"),w=!0}}function ge(){w?(clearTimeout(b),document.getElementById("EndOverlay").style.opacity="0%",b=setTimeout((function(){document.getElementById("EndOverlay").style.visibility="hidden",w=!1,(0,y.C)()}),250),(0,f.eL)()):console.warn("Result screen already disabled.")}var x,I=document.getElementById("extendedNavbar"),k=document.getElementById("categoryMenuButton"),B=document.getElementById("topButtonArea"),L=document.getElementById("mobileButtonArea"),S=!1;function ve(e){try{var t,n;e&&(S=!0),S?(clearTimeout(t),clearTimeout(n),setTimeout((function(){B.style.top="15px",L.style.top="15px",document.getElementById("extendedNavbarGradient").style.display="none",document.getElementById("mobileExtendedNavbarControls").style.display="none"}),75),document.getElementById("mobileExtendedNavbarControls").style.opacity="0",I.classList.remove("expanded"),I.classList.remove("expandedMobile"),document.getElementById("mapsArrow").classList.remove("arrowIconRotated"),S=!1):(clearTimeout(t),clearTimeout(n),document.getElementById("extendedNavbarContent").scrollTop="0",window.matchMedia("(max-width: 600px)").matches?(I.classList.add("expandedMobile"),document.getElementById("extendedNavbarGradient").style.display="block",document.getElementById("extendedNavbarGradient").style.borderRadius="0",n=setTimeout((function(){document.getElementById("mobileExtendedNavbarControls").style.display="flex",document.getElementById("mobileExtendedNavbarControls").style.opacity="1"}),150)):(document.getElementById("extendedNavbarGradient").style.borderRadius="0 0 10px 10px",L.style.top="355px"),t=setTimeout((function(){B.style.top="355px",document.getElementById("extendedNavbarGradient").style.display="block",I.classList.add("expanded"),document.getElementById("mapsArrow").classList.add("arrowIconRotated"),S=!0}),100))}catch(e){console.warn("Couldn't toggle category menu: "+e)}}function Ee(e){e?document.getElementById("gamemodeMenu").classList.remove("gamemodeMenuDisabled"):document.getElementById("gamemodeMenu").classList.add("gamemodeMenuDisabled")}k.addEventListener("click",(function(){ve(!1),(0,l.Ak)("floating_button")})),document.getElementById("mobileCategoriesClose").addEventListener("click",(function(){ve(!0),(0,l.Ak)("basic_button")})),document.getElementById("gamemodeMenu").addEventListener("mouseover",(function(){clearTimeout(x),document.querySelectorAll(".topBarSides").forEach((function(e){e.classList.add("sideMenuDisabled")}))})),document.getElementById("gamemodeMenu").addEventListener("mouseout",(function(){clearTimeout(x),x=setTimeout((function(){document.querySelectorAll(".topBarSides").forEach((function(e){e.classList.remove("sideMenuDisabled")}))}),200)}));var T=document.getElementById("socialWindow");function be(){T.style.display="none",document.getElementById("blackBackground").style.visibility="hidden",localStorage.setItem("discordPopup","true")}function we(){i.wR&&null==localStorage.getItem("discordPopup")&&"block"!=document.getElementById("pageBrowserWindow").style.display&&(0===Math.floor(3*Math.random())&&(document.getElementById("discordWidget").setAttribute("src","https://discord.com/widget?id=1221841177863651499&theme=dark"),T.style.display="block",document.getElementById("blackBackground").style.visibility="visible"))}document.getElementById("socialPopupClose").addEventListener("click",(function(){be(),(0,l.Ak)("basic_button")})),document.getElementById("socialPopupJoin").addEventListener("click",(function(){(0,l.Ak)("basic_button"),window.open("https://discord.gg/CSc3MbDrZ8","_blank").focus(),setTimeout(ue(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be(),e.next=3,(0,i.sH)(Number(localStorage.getItem("experience"))+7500,7500,!1);case 3:(0,i.ki)(localStorage.getItem("experience"));case 4:case"end":return e.stop()}}),e)}))),200)})),document.getElementById("revealCompass").addEventListener("click",(function(){xe(),(0,l.Ak)("basic_button")}));var C=!1;function xe(){C=!C,localStorage.setItem("mapOffset",C),Ie()}function Ie(){C?(document.getElementById("revealCompassArrow").style.transform="rotate(270deg)",document.getElementById("mapHolder").style.marginRight="65px"):(document.getElementById("revealCompassArrow").style.transform="rotate(90deg)",document.getElementById("mapHolder").style.marginRight="0px")}function ke(){var e=document.getElementById("accountName");e.textContent.length>10?e.classList.add("namescroll"):e.classList.remove("namescroll")}"true"==localStorage.getItem("mapOffset")&&(C=!0),Ie(),window.addEventListener("resize",(function(e){E=!1,me(),ve(!0)})),document.getElementById("mobileLeaderboardButton").addEventListener("click",(function(){(0,l.Ak)("basic_button"),pe()})),document.getElementById("mobileMultiplayerButton").addEventListener("click",(function(){(0,c.qf)(),(0,l.Ak)("basic_button")})),document.getElementById("mobileCategoryButton").addEventListener("click",(function(){ve(),(0,l.Ak)("floating_button")})),document.getElementById("mobileCompetitionsButton").addEventListener("click",(function(){(0,l.Ak)("basic_button"),rt("/competitions.html")})),document.addEventListener("keydown",(function(e){var t=e.target.tagName.toLowerCase();"Enter"!==e.key&&" "!==e.key||"button"===t&&e.preventDefault()})),document.getElementById("settingsButton").addEventListener("click",(function(){(0,l.Ak)("basic_button"),Be()}));var A=document.getElementById("settingsWindow");function Be(){"block"==A.style.display?(A.style.display="none",document.getElementById("blackBackground").style.visibility="hidden"):(A.style.display="block",document.getElementById("blackBackground").style.visibility="visible",document.getElementById("exitPopupSetting").textContent="1"==localStorage.getItem("hideExitPopup")?"Disabled":"Enabled")}document.getElementById("settingsClose").addEventListener("click",(function(){(0,l.Ak)("basic_button"),Be()}));var M=document.getElementById("unitSwitchKilometers"),P=document.getElementById("unitSwitchMiles"),_="kilometers",N=localStorage.getItem("distanceUnit");function Le(e){"miles"==e?(M.style.opacity="0.5",P.style.opacity="1",_="miles"):(P.style.opacity="0.5",M.style.opacity="1",_="kilometers")}function Se(e){if(!e||null===e.offsetParent||"hidden"===getComputedStyle(e).visibility)return!1;for(var t=e.getBoundingClientRect(),n=t.left+t.width/2,r=t.top+t.height/2,o=document.elementFromPoint(n,r),a=e,i=null;a;)"none"===getComputedStyle(a).pointerEvents?i=a:"auto"===getComputedStyle(a).pointerEvents&&(i=null),a=a.parentElement;return!i&&(o===e||e.contains(o))}Le(null!=N?N:"kilometers"),M.addEventListener("click",(function(){Le("kilometers"),(0,l.Ak)("basic_button"),localStorage.setItem("distanceUnit","kilometers")})),P.addEventListener("click",(function(){Le("miles"),(0,l.Ak)("basic_button"),localStorage.setItem("distanceUnit","miles")})),document.getElementById("exitPopupSetting").addEventListener("click",(function(){"1"==localStorage.getItem("hideExitPopup")?(localStorage.setItem("hideExitPopup","0"),document.getElementById("exitPopupSetting").textContent="Enabled"):(localStorage.setItem("hideExitPopup","1"),document.getElementById("exitPopupSetting").textContent="Disabled")})),document.getElementById("fullscreenButton").addEventListener("click",(function(){try{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()}catch(e){console.error("Error entering / exiting fullscreen: "+e)}})),document.addEventListener("fullscreenchange",(function(){document.fullscreenElement?document.getElementById("fullscreenText").textContent="Exit Fullscreen":document.getElementById("fullscreenText").textContent="Fullscreen"}));var O=document.getElementById("troubleshootGuideButton"),j=document.getElementById("troubleshootClose"),G=document.getElementById("troubleshootWindow");function Te(){(0,l.Ak)("basic_button"),(0,c.qf)(),"block"!=G.style.display&&(document.getElementById("blackBackground").style.visibility="visible"),G.style.display="block"!=G.style.display?"block":"none"}O.addEventListener("click",Te),j.addEventListener("click",Te),setTimeout((function(){document.querySelectorAll(".noAdvertsText").forEach((function(e){e.style.opacity="0.25"}))}),8e3),document.getElementById("dailyCompetition").addEventListener("click",(function(){(0,l.Ak)("button_juicy"),rt("/competitions.html")}));var R=document.getElementById("confirmPopup");function Ce(e,t,n,r,o,a,i,c,s){R.style.display="flex",document.getElementById("confirmTitle").textContent=e,document.getElementById("confirmDescription").innerHTML=t,document.getElementById("accountDeletePassword").style.display="none",document.getElementById("usernameInput").style.display="none",document.getElementById("confirmProceed").style.display="block",document.getElementById("confirmProceed").textContent="Confirm",document.getElementById("confirmProceed").style.backgroundColor="var(--brand-color)",r&&(document.getElementById("accountDeletePassword").style.display="block",document.getElementById("accountDeletePassword").value=""),o&&(document.getElementById("usernameInput").style.display="block",document.getElementById("usernameInput").value=""),a&&(document.getElementById("confirmProceed").style.display="none"),i&&(document.getElementById("confirmProceed").textContent="Reactivate",document.getElementById("confirmProceed").style.backgroundColor="#588e6b"),c&&(document.getElementById("confirmProceed").textContent="Support",document.getElementById("confirmProceed").style.backgroundColor="#588e6b"),s&&(document.getElementById("confirmProceed").textContent="Create Account");var u=document.getElementById("confirmProceed"),d=u.cloneNode(!0);u.parentNode.replaceChild(d,u),d.addEventListener("click",(function(){(0,l.Ak)("basic_button");try{n&&n(),R.style.display="none"}catch(e){console.error("Couldn't execute callback function in confirm popup in mainUI.js: "+e)}}))}document.getElementById("confirmCancel").addEventListener("click",(function(){(0,l.Ak)("basic_button"),R.style.display="none"}));var F,H=document.getElementById("supporterBoost"),D=document.getElementById("supporterBoostText");function Ae(e){return Me.apply(this,arguments)}function Me(){return(Me=ue(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.style.opacity="0",D.classList.remove("supporterBoostTextMove"),clearTimeout(F),e.next=5,new Promise((function(e){F=setTimeout(e,1500)}));case 5:t-=1,t=Math.round(100*t),t+="%",D.textContent=t+" Experience Boost",H.style.opacity="1",D.classList.add("supporterBoostTextMove"),F=setTimeout((function(){H.style.opacity="0",D.classList.remove("supporterBoostTextMove")}),2e3);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(){return i.wR?(_e(),!0):(Ce("Account required","To support OpenGuessr with a one-time payment, an account is required, so that you can enjoy amazing supporter benefits on all devices!",(function(){rt("/signup.html",!0)}),!1,!1,!1,!1,!1,!0),!1)}function _e(){je(),document.getElementById("supporterPopup").style.display="flex",document.getElementById("supporterTierScrollBox").scrollTop="0"}function Ne(){Oe(),document.getElementById("supporterPopup").style.display="none"}function Oe(){p.FT>0?(document.getElementById("supporterPitch").textContent="Thank you.",document.getElementById("supporterTextSecondary").textContent="Your contribution keeps the game free."):(document.getElementById("supporterPitch").textContent="Become a supporter.",document.getElementById("supporterTextSecondary").textContent="Contributions keep the game free.")}function je(){for(var e=[2.99,6.99,14.99,24.99],t=1;t<=4;t++){var n=document.getElementById("tierPrice"+t);p.FT>=t?(n.classList.add("tierBuyButtonUnlocked"),n.textContent="Unlocked"):(n.classList.remove("tierBuyButtonUnlocked"),n.textContent=e[t-1]+" $",p.Dl>0&&(n.innerHTML='<span class="baseTierPrice">'.concat(n.textContent=e[t-1]," $</span>").concat(Math.round(100*Math.max(e[t-1]-p.Dl-.01,0))/100," $")))}}document.querySelectorAll(".supporterAdText").forEach((function(e){e.addEventListener("click",(function(){Pe()}))})),document.getElementById("viewSupporterBenefits").addEventListener("click",(function(){(0,l.Ak)("basic_button"),_e()})),document.getElementById("supporterClose").addEventListener("click",(function(){(0,l.Ak)("basic_button"),Ne()}));var q,z="pk_live_51Ple5q1DTHjmMID9LrSuKNuwlN0Ls0issp2PTRO9QWGPdmKpLspMUXvKZQnXtHT5u0SxYZDBVSDsadzy3lAq5T2j00X9uGEJdr";function Ge(){return Re.apply(this,arguments)}function Re(){return(Re=ue(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.$U)("https://js.stripe.com/v3/","Stripe",(function(e){return e(z)}));case 2:return q=e.sent,e.abrupt("return",q);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return He.apply(this,arguments)}function He(){return(He=ue(se().mark((function e(t){var n,r,a,i,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=3;break}return e.next=3,Ge();case 3:return e.prev=3,n=localStorage.getItem("id"),e.next=7,fetch("https://accounts.openguessr.com/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("bearer")},body:JSON.stringify({productId:t,id:n})});case 7:return r=e.sent,e.next=10,r.json();case 10:return a=e.sent,i=a.sessionId,e.next=14,q.redirectToCheckout({sessionId:i});case 14:(c=e.sent).error&&(console.error("Error occured during request to stripe:",c.error.message),(0,o.N)("Stripe request failed","The server returned an error from your purchase request.",error,!1,!1)),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error occured when trying to send request to stripe:",e.t0),(0,o.N)("Error sending stripe request","Your purchase request couldn't be sent.",e.t0,!1,!1);case 22:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}document.querySelectorAll(".tierBuyButton").forEach((function(e){try{e.addEventListener("click",(function(){Fe(Number(e.id.replace(/[^0-9]/g,""))),e.textContent="please wait..."}))}catch(e){console.error("Failed to attach event listener to tierBuyButton: "+e)}}));var U=new URLSearchParams(window.location.search);try{U.get("session_id")&&(Ce("Thank you!","You are now a supporter - thank you for your contribution! Supporters like you keep the game free and open for everyone.",!1,!1,!1,!0),history.replaceState({},document.title,window.location.pathname))}catch(at){}var W=document.getElementById("freeSupporterBoost"),J=!1;function De(e){e?(document.getElementById("adTierBox").style.pointerEvents="auto",document.getElementById("adTierBox").style.background="rgb(80, 90, 91)",W.style.pointerEvents="auto",W.style.opacity="1",document.getElementById("freeSupporterBoostText").textContent="Free 20% experience boost."):(document.getElementById("adTierBox").style.pointerEvents="none",document.getElementById("adTierBox").style.background="rgba(255, 255, 255, 0.1)",W.style.pointerEvents="none",W.style.opacity="0.5",document.getElementById("freeSupporterBoostText").textContent="Experience boost active.")}function qe(e,t){e?((0,o.N)("No ad available","Please try again later or disable Ad Blockers.","No ads",!1,!1),De(!0)):t?De(!1):((0,o.N)("Ad dismissed","Video ad dismissed. ","",!1,!0),De(!0))}function ze(){De(!1),Ue(),J=!0}function Ue(){return We.apply(this,arguments)}function We(){return We=ue(se().mark((function e(){var t,n,r,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:"Boost active. Remaining: ",n=180,r=document.getElementById("freeSupporterBoostText"),function e(){var o=n>59?Math.floor(n/60)+":"+(n%60).toString().padStart(2,"0")+" min":n+"s";r.textContent=t+o,n>0?(setTimeout(e,1e3),n--):(De(!0),J=!1,Ce("Boost expired","Your free experience boost has expired. Do you want to reactivate it?",(function(){(0,m.R)(qe,ze)}),!1,!1,!1,!0))}();case 3:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}W.addEventListener("click",(function(){(0,l.Ak)("basic_button"),(0,m.R)(qe,ze)}));var Y,$,V,X=document.getElementById("notificationBar");function Je(e,t,n,r,o){return Ye.apply(this,arguments)}function Ye(){return(Ye=ue(se().mark((function e(t,n,r,o,a){var i,c,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(Y),clearTimeout($),"1"!=X.style.opacity||"visible"!=X.style.visibility){e.next=6;break}return $e(),e.next=6,new Promise((function(e){return setTimeout(e,250)}));case 6:X.style.top="65px",X.style.visibility="visible",X.style.opacity="1",document.getElementById("notificationText").textContent=t,document.getElementById("notificationAccept").textContent="Accept",o?(document.getElementById("notificationAccept").style.display="block",Y=setTimeout((function(){$e()}),3e4)):(document.getElementById("notificationAccept").style.display="none",Y=setTimeout((function(){$e()}),3e3)),a&&(document.getElementById("notificationAccept").textContent="?",clearTimeout(Y),Y=setTimeout((function(){$e()}),5e3)),i=document.getElementById("notificationAccept"),c=i.cloneNode(!0),i.parentNode.replaceChild(c,i),s=document.getElementById("notificationDismiss"),u=s.cloneNode(!0),s.parentNode.replaceChild(u,s),c.addEventListener("click",(function(){if(n)try{n()}catch(e){console.error("Error executing callback in showNotification: "+e)}$e(),(0,l.Ak)("basic_button")})),u.addEventListener("click",(function(){if(r)try{r()}catch(e){console.error("Error executing callback in showNotification: "+e)}$e(),(0,l.Ak)("basic_button")}));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){X.style.top="50px",X.style.opacity="0",clearTimeout($),$=setTimeout((function(){X.style.visibility="hidden"}),200)}function Ve(e){try{document.querySelectorAll(".hideForSupporters").forEach((function(t){t.style.display=e?"":"none"}))}catch(e){console.error("Error disabling/enabling ads that can be hidden for supporters in main.js: "+e)}}var K=!1,Z=window.innerHeight,Q=!1;document.addEventListener("mousemove",(function(e){var t=e.clientY;if(!Q)return Q=!0,void(Z=t);Z=t})),document.querySelectorAll(".topBarDesktop").forEach((function(e){e.addEventListener("mouseover",(function(){clearTimeout(V),K=!0,V=setTimeout((function(){K=!1}),350)}))})),document.getElementById("topCursorDetectionBar").addEventListener("mouseover",(function(e){var t=e.clientY;t<Z&&Q&&(K||Xe()),Z=t})),document.addEventListener("mouseleave",(function(){Q=!1}));var ee=document.getElementById("beforeExitPopup");function Xe(){"1"!=localStorage.getItem("hideExitPopup")&&"flex"!=ee.style.display&&(ee.style.display="flex",ne=!1,Ke(),Ze())}document.getElementById("beforeExitNotAgain").addEventListener("click",(function(){ee.style.display="none",localStorage.setItem("hideExitPopup","1"),(0,l.Ak)("basic_button")})),document.getElementById("beforeExitClose").addEventListener("click",(function(){ee.style.display="none",(0,l.Ak)("basic_button")})),document.getElementById("costSupportButton").addEventListener("click",(function(){ee.style.display="none",(0,l.Ak)("basic_button"),Pe()})),document.getElementById("beforeExitReloadButton").addEventListener("click",(function(){ee.style.display="none",(0,l.Ak)("basic_button"),(0,c.y4)(),(0,d.jE)(!1),ge(),ot(),(0,u.JS)()}));var te=document.getElementById("costExplanationText"),ne=!1;function Ke(){ne?(document.getElementById("costExplanationToggle").textContent="Show less",te.style.maxHeight="5000px"):(document.getElementById("costExplanationToggle").textContent="Read more",te.style.maxHeight="")}function Ze(){return Qe.apply(this,arguments)}function Qe(){return(Qe=ue(se().mark((function e(){var t,n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.getElementById("monthlySupportedAmount")).textContent="+$ ... ...",e.prev=2,e.next=5,fetch("https://accounts.openguessr.com/stripe/statistics/current-month",{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if((n=e.sent).ok){e.next=10;break}console.error("Error occurred while loading monthly supported amount: "+n.status),e.next=14;break;case 10:return e.next=12,n.json();case 12:r=e.sent,t.textContent="+$ "+r.supported_amount;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error("Network error occured trying to load monthly supported amount: "+e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}document.getElementById("costExplanationToggle").addEventListener("click",(function(){ne=!ne,Ke()}));var re=document.getElementById("captchaPopup"),oe=!1;function et(){if(re.style.display="flex",!oe){oe=!0;try{turnstile.render("#captchaContainer",{sitekey:"0x4AAAAAAAi-FhzOg4nXIP3z",callback:onTurnstileCallback})}catch(e){console.error("Error occured trying to render captcha with Turnstile: "+e)}}}function tt(){re.style.display="none"}function nt(e){e.forEach((function(e){e.isIntersecting?e.target.classList.add("animate"):e.target.classList.remove("animate")}))}document.getElementById("captchaClose").addEventListener("click",(function(){(0,l.Ak)("basic_button"),tt()}));var ae=new IntersectionObserver(nt,{root:null,rootMargin:"0px",threshold:0});document.querySelectorAll(".uiWindow").forEach((function(e){ae.observe(e)}));var ie=document.getElementById("pageBrowserWindow");function rt(e,t){document.getElementById("blackBackground").style.visibility="visible",document.getElementById("pageBrowserIframe").src=window.location.origin+e,T.style.display="none",t?ie.classList.add("loginIframeWindow"):ie.classList.remove("loginIframeWindow"),ie.style.display="block",document.getElementById("pageBrowserIframe").onload=function(){this.style.opacity="1"}}function ot(){"none"!=ie.style.display&&(document.getElementById("blackBackground").style.visibility="hidden",ie.style.display="none",document.getElementById("pageBrowserIframe").style.opacity="0",document.getElementById("pageBrowserIframe").src="")}window.onmessage=function(e){try{var t=String(e.data),n=t.match(/^profile(\d+)$/);switch(!0){case"close"===t:ot();break;case"reloadCommunityMaps"===t:(0,u.sw)(),(0,u.v$)();break;case"loadCategory"===t:(0,u.LL)(),(0,u.X$)(u.BI,!1);break;case"reloadCategory"===t:(0,u.LL)(),(0,u.X$)(u.BI,!0);break;case"loadAccountStatus"===t:(0,i.h4)();break;case"loadCompetition"===t:(0,d.UH)(!0);break;case null!==n:(0,p.nk)(Number(n[1]),!1,!0)}}catch(e){console.error("Error processing window message: "+e)}},r()}catch(it){r(it)}}))},252:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{BD:()=>R,MN:()=>I,S8:()=>b,Tj:()=>p,b5:()=>k,eL:()=>D,oO:()=>W,qJ:()=>Z,xA:()=>V});var o=n(47),a=n(911),i=n(960),c=n(49),s=n(256),l=n(880),u=e([o,a,i,s]);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function C(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */C=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new P(r||[]);return o(i,"_invoke",{value:L(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function v(){}function E(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(_([])));x&&x!==n&&r.call(x,i)&&(b=x);var I=E.prototype=g.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==T(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=S(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function S(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(T(t)+" is not iterable")}return v.prototype=E,o(I,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:v,configurable:!0}),v.displayName=l(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,l(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},k(B.prototype),l(B.prototype,c,(function(){return this})),t.AsyncIterator=B,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new B(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(I),l(I,s,"Generator"),l(I,i,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function A(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,c,"next",e)}function c(e){A(a,r,o,i,c,"throw",e)}i(void 0)}))}}[o,a,i,s]=u.then?(await u)():u;var d,p,m={STANDARD:"0",SATELLITE:"1",HYBRID:"2",TERRAIN:"3"};function P(e){return _.apply(this,arguments)}function _(){return(_=M(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){if(window.google&&window.google.maps)e(window.google.maps);else{var r=document.createElement("script");r.src="https://maps.googleapis.com/maps/api/js?key=".concat(t,"&v=weekly"),r.async=!0,r.defer=!0,r.onload=function(){window.google&&window.google.maps?e(window.google.maps):n(new Error("Google Maps API script loaded, but no google.maps object found."))},r.onerror=function(){n(new Error("Failed to load the Google Maps API script."))},document.head.appendChild(r)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return O.apply(this,arguments)}function O(){return O=M(C().mark((function e(){var t,n,r,o,a;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.Ds)("Loading minimap.."),t=localStorage.getItem("bearer")?{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("bearer")),"cf-turnstile-response":d}:{"Content-Type":"application/json","cf-turnstile-response":d},n="https://accounts.openguessr.com/accounts/maplimit?time="+(new Date).getTime(),e.prev=3,e.next=6,fetch(n,{method:"GET",headers:t});case 6:if(!(r=e.sent).ok){e.next=17;break}return e.next=10,r.json();case 10:return o=e.sent,e.next=13,new Promise(function(){var e=M(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.apiKey.keyString){e.next=6;break}return e.next=3,P(o.apiKey.keyString);case 3:t(),e.next=8;break;case 6:console.error("No api key returned by the maplimit endpoint."),t();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:return o.rateLimit&&(c=o.rateLimit.used,s=o.rateLimit.limit,(0,i.Ds)("(".concat(c,"/").concat(s,") daily minimap loads used."),(function(){(0,i.WV)("What are minimap loads?","A daily load is only used when you first open the minimap after loading the site, meaning your playtime remains unrestricted.<br><br> To help reduce API costs, please keep the website open to minimize additional minimap loads. The available amount resets every day.",!1,!1,!1,!0)}),!1,!0,!0)),e.abrupt("return",!0);case 17:return e.next=19,r.json();case 19:return a=e.sent,console.error("Map load limit reached: "+a.error),(0,l.N)("Daily minimap load limit reached","To prevent extraordinarily high Google API costs, your map load request was denied due to too many refreshes. Become a supporter to increase your limit!",a.error,!1,!1),e.abrupt("return",!1);case 23:e.next=30;break;case 25:return e.prev=25,e.t0=e.catch(3),console.error("Error occurred while checking for the map load limit: "+e.t0),(0,l.N)("Failed to validate minimap load","The system that validates minimap loads didn't respond. Check your internet connection and consider reporting the issue on Discord if it persists.",e.t0,!1,!1),e.abrupt("return",!1);case 30:case"end":return e.stop()}var c,s}),e,null,[[3,25]])}))),O.apply(this,arguments)}var y={north:90,south:-90,west:-190,east:190},f=localStorage.getItem("providerIndex")||m.STANDARD;function j(){return G.apply(this,arguments)}function G(){return(G=M(C().mark((function e(){var t,n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!h,!e.t0){e.next=5;break}return e.next=4,N();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=18;break}return h=!0,e.next=9,google.maps.importLibrary("maps");case 9:t=e.sent,n=t.Map,H(),(p=new n(document.getElementById("map"),{center:{lat:20,lng:0},zoom:2,streetViewControl:!1,zoomControl:!1,fullscreenControl:!1,mapTypeControl:!1,draggableCursor:"crosshair",clickableIcons:!1,restriction:{latLngBounds:y,strictBounds:!0}})).addListener("click",(function(e){i.Lv||$(e.latLng)})),p.setMapTypeId(Y(f)),q(),z(),document.dispatchEvent(new Event("mapInitialized"));case 18:d="";case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=!1,g=!1;function R(){return F.apply(this,arguments)}function F(){return(F=M(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h||v||g||(0,i.Up)();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=!1;function H(){var e=document.getElementById("mapPlaceholderBeforeLoad");e&&(e.style.opacity="0",setTimeout((function(){try{e.remove()}catch(e){}}),500))}window.onTurnstileCallback=function(){var e=M(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=8;break}return v=!0,g=!0,d=t,(0,i.hu)(),e.next=7,j();case 7:v=!1;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),document.getElementById("map").addEventListener("mouseover",(function(){R()})),document.getElementById("map").addEventListener("touchstart",(function(){R()}));var E=[],b=[];function D(){if(document.getElementById("mapHolder").classList.remove("mapHolderToResult"),document.getElementById("map").classList.remove("mapFullOpacity"),K(),p){for(var e=0;e<b.length;e++)b[e].setMap(null);b=[],p.panTo({lat:20,lng:0}),p.setZoom(2),p.overlayMapTypes.clear()}w=!1,U()}function q(){var e="Minimap:";switch(f){case"0":default:document.getElementById("mapTypeButton").innerHTML="".concat(e," Standard");break;case"1":document.getElementById("mapTypeButton").innerHTML="".concat(e," Satellite");break;case"2":document.getElementById("mapTypeButton").innerHTML="".concat(e," Hybrid");break;case"3":document.getElementById("mapTypeButton").innerHTML="".concat(e," Terrain")}}function z(){p&&document.getElementById("mapTypeButton")&&(document.getElementById("mapTypeButton").style.pointerEvents="auto",document.getElementById("mapTypeButton").style.opacity="1")}var w=!1;function U(){w?(document.getElementById("confirmButton").style.backgroundColor="red",document.getElementById("confirmButton").style.color="white",document.getElementById("confirmButton").style.opacity="100%",document.getElementById("confirmButton").style.pointerEvents="auto",document.getElementById("helpButton").classList.add("helpButtonDisabled")):(document.getElementById("confirmButton").style.backgroundColor="rgba(168, 168, 187, 0.3)",document.getElementById("confirmButton").style.pointerEvents="none",document.getElementById("helpButton").classList.remove("helpButtonDisabled"))}function W(){w=!0,U()}function J(){switch(f){case m.STANDARD:f=m.SATELLITE;break;case m.SATELLITE:f=m.HYBRID;break;case m.HYBRID:f=m.TERRAIN;break;default:f=m.STANDARD}localStorage.setItem("providerIndex",f),p&&p.setMapTypeId(Y(f)),q()}function Y(e){switch(e){case m.STANDARD:return google.maps.MapTypeId.ROADMAP;case m.SATELLITE:return google.maps.MapTypeId.SATELLITE;case m.HYBRID:return google.maps.MapTypeId.HYBRID;case m.TERRAIN:return google.maps.MapTypeId.TERRAIN;default:return google.maps.MapTypeId.ROADMAP}}U();var x,I=0,k=0;function $(e){w=!0,U(),(0,c.Ak)("pin_drop","pin"),x&&x.setMap(null),I=e.lat(),k=e.lng();var t={url:"./IMG/your_marker"+o.n9+".png",size:new google.maps.Size(35,35),anchor:new google.maps.Point(17.5,34),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(35,35)};x=new google.maps.Marker({position:e,map:p,icon:t,clickable:!1}),b.push(x),(0,a.rn)(I,k)}function V(e){var t=new Map;E.forEach((function(e){var n=e.getPosition();t.set("".concat(n.lat(),",").concat(n.lng()),e)}));try{E.forEach((function(n){var r=n.getPosition(),o="".concat(r.lat(),",").concat(r.lng());e.some((function(e){var t=e[1],n=e[2];return t==r.lat()&&n==r.lng()}))||(n.setMap(null),E=E.filter((function(e){return e!==n})),t.delete(o))})),e.forEach((function(e){var n=e[0],r=e[1],o=e[2],i=e[3],c=e[4];if(n!=a.cl&&c===a.HW){var s=new google.maps.LatLng(r,o),l="".concat(s.lat(),",").concat(s.lng());if(!t.has(l)){var u={url:"./IMG/your_marker"+i+".png",size:new google.maps.Size(25,25),anchor:new google.maps.Point(15,24),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(25,25)},d=new google.maps.Marker({position:s,map:p,icon:u,clickable:!1});b.push(d),E.push(d),t.set(l,d)}}}))}catch(e){console.error("Error updating minimap with team markers: "+e)}}var B=document.getElementById("confirmButton");B.addEventListener("click",Z),document.getElementById("mapTypeButton").addEventListener("click",(function(){J(),(0,c.Ak)("selection_change")}));var L,S=document.getElementById("mapHolder");function X(){window.matchMedia("(min-width: 1200px)").matches&&(clearTimeout(L),S.classList.add("mapHover"))}function K(){L=setTimeout((function(){S.classList.remove("mapHover")}),250)}try{new ResizeObserver((function(){var e;(e=document.getElementById("mapModeTextContainer").getBoundingClientRect().width)<150||e<235&&document.getElementById("mapModeText").textContent.length>25||e<280&&document.getElementById("mapModeText").textContent.length>31?document.getElementById("mapModeText").classList.add("modetextScroll"):document.getElementById("mapModeText").classList.remove("modetextScroll")})).observe(document.getElementById("mapModeTextContainer"))}catch(Q){console.error("Error setting Resize Observer in miniMap.js: "+Q)}function Z(){if(B.style.pointerEvents="none",(0,c.Ak)("basic_button"),document.getElementById("nextRoundText").textContent="Next round",s.GS){try{s.Xh.stopTimer()}catch(e){console.warn("Competition timer already stopped: "+e)}(0,s.mU)(!0)?document.getElementById("nextRoundText").textContent="Next round":document.getElementById("nextRoundText").textContent="See ranking"}a.$s?(document.getElementById("guessText").textContent="Waiting",document.getElementById("confirmButton").style.pointerEvents="none",document.getElementById("map").style.visibility="hidden",w=!1,U(),(0,i.uc)(!0),document.getElementById("revealCompass").style.visibility="hidden",(0,a.Pq)()):(0,i.ry)(I,k)}document.getElementById("map").addEventListener("mouseenter",X),document.getElementById("map").addEventListener("mouseleave",K),document.getElementById("map").addEventListener("touchstart",X),document.getElementById("map").addEventListener("touchend",K),document.getElementById("map").addEventListener("keyup",(function(e){" "===e.key&&"auto"==B.style.pointerEvents&&(0,i.dS)(document.getElementById("map"))&&Z()})),r()}catch(ee){r(ee)}}))},911:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{$s:()=>Z,DK:()=>Ce,Eu:()=>gt,H2:()=>xt,HW:()=>Te,LV:()=>f,M0:()=>rn,N0:()=>Jt,O3:()=>tn,PD:()=>Mt,Pq:()=>yt,QU:()=>wt,Wn:()=>ht,X8:()=>$t,cA:()=>At,cl:()=>pe,ix:()=>Xt,jU:()=>he,kN:()=>Q,ld:()=>ce,qf:()=>Ze,rP:()=>Le,rn:()=>Zt,sB:()=>dn,x9:()=>yn,y4:()=>on});var o=n(390),a=n(880),i=n(960),c=n(138),s=n(560),l=n(47),u=n(108),d=n(252),p=n(49),m=n(340),y=e([o,i,s,l,u,d,m]);function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function ze(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ze=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new A(r||[]);return o(i,"_invoke",{value:L(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function v(){}function E(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==n&&r.call(x,i)&&(b=x);var I=E.prototype=g.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==qe(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=S(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function S(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(qe(t)+" is not iterable")}return v.prototype=E,o(I,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:v,configurable:!0}),v.displayName=l(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,l(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},k(B.prototype),l(B.prototype,c,(function(){return this})),t.AsyncIterator=B,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new B(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(I),l(I,s,"Generator"),l(I,i,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Ue(e,t){return Ve(e)||$e(e,t)||Je(e,t)||We()}function We(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Je(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}function Ve(e){if(Array.isArray(e))return e}function Xe(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xe(a,r,o,i,c,"next",e)}function c(e){Xe(a,r,o,i,c,"throw",e)}i(void 0)}))}}[o,i,s,l,u,d,m]=y.then?(await y)():y;var f=[35.7072457,139.863412],h=document.getElementById("multiplayerButton"),g=document.getElementById("multiplayerSelectionWindow"),v=document.getElementById("multiplayerSelectJoin"),E=document.getElementById("multiplayerSelectHost"),b=document.getElementById("multiplayerSelectDuels"),w=document.getElementById("multiplayerSelectorClose"),x=document.getElementById("multiplayerJoinInfo"),I=document.getElementById("multiplayerJoin"),k=document.getElementById("multiplayerHost"),B=document.getElementById("nmpzBackground"),L=document.getElementById("roundPlus"),S=document.getElementById("roundMinus"),T=document.getElementById("roundAmountText"),C=document.getElementById("lengthPlus"),A=document.getElementById("lengthMinus"),M=document.getElementById("roundLengthText"),P=document.getElementById("teamsPlus"),_=document.getElementById("teamsMinus"),N=document.getElementById("teamAmountText"),O=document.getElementById("multiplayerDuelRetry");h.addEventListener("click",(function(){Ze(),(0,p.Ak)("basic_button")})),w.addEventListener("click",(function(){(0,p.Ak)("basic_button"),on(),Ze()}));var j,G=!1,R=0;function Ze(e){"close"==e&&(G=!0),G?(g.style.display="none",document.getElementById("blackBackground").style.visibility="hidden",clearInterval(j)):(g.style.display="block",document.getElementById("blackBackground").style.visibility="visible",Qe("main")),G=!G}var F=document.getElementById("hostCodeArea"),H=document.getElementById("roomCreationSettings"),D=1;v.addEventListener("click",(function(){(0,p.Ak)("basic_button"),Qe("join")})),E.addEventListener("click",(function(){(0,p.Ak)("basic_button"),Qe("host")})),b.addEventListener("click",(function(){(0,p.Ak)("basic_button"),Qe("duel")}));var q=document.getElementById("multiplayerWindowMain"),z=document.getElementById("multiplayerWindowJoin"),U=document.getElementById("multiplayerWindowHost"),W=document.getElementById("multiplayerWindowDuel"),J=document.getElementById("toggleRestrictions"),Y=document.getElementById("multiplayerSelectorBack");function Qe(e){q.style.display="none",z.style.display="none",U.style.display="none",W.style.display="none",Y.style.display="none",Y.style.opacity="0.5",w.style.opacity="1",document.getElementById("multiplayerMapDisplay").textContent=u.BI.replace("community_",""),Y.style.pointerEvents="auto",w.style.pointerEvents="auto",F.style.display="none",H.style.display="flex",k.textContent="Create room",M.textContent="120",T.textContent="3",N.textContent="no",D=1,O.style.pointerEvents="none",O.style.opacity="0.5",J.textContent="Standard",document.getElementById("roomCodeInput").value="",$="standard",Pt("Initializing..."),ct(0),document.getElementById("teamsDisplayText").textContent="Nothing to display",document.getElementById("friendsInviteDisplay").style.display="none",et("Enter the room code."),document.getElementById("roomCreationModes").style.display="flex",document.getElementById("roomCreationTeams").style.display="flex",document.getElementById("roomCreationMap").style.display="flex",document.getElementById("roomcodeLink").style.display="none",tt(),on(),clearInterval(j),"main"==e?(q.style.display="block",Kt(),s.wR&&((0,m.wY)(!0),clearInterval(j),j=setInterval((function(){"block"==g.style.display&&(0,m.wY)(!1)}),1e4))):"join"==e?(z.style.display="block",Y.style.display="block"):"host"==e?(U.style.display="block",Y.style.display="block"):"duel"==e&&(s.wR?(W.style.display="block",Y.style.display="block",_t()):(Ze("close"),(0,i.rP)("/signup.html",!0)))}function et(e){x.innerText=e,document.getElementById("linkjoinStatus").textContent=e}function tt(){""!=document.getElementById("roomCodeInput").value?(I.style.opacity="1",I.style.pointerEvents="auto"):(I.style.opacity="0.5",I.style.pointerEvents="none")}function nt(){return rt.apply(this,arguments)}function rt(){return(rt=Ke(ze().mark((function e(){var t,n,r,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,document.getElementById("roomCreationFriendsBox").style.maxHeight="0",t={id:localStorage.getItem("id")},e.next=5,fetch("https://friends.openguessr.com/friends/friends",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("bearer"),"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:if(!(n=e.sent).ok){e.next=22;break}return e.prev=7,e.next=10,n.json();case 10:r=e.sent,o=0,document.getElementById("roomCreationFriendsBox").innerHTML="",r.friends.forEach((function(e){if(e.online){o++;var t=document.createElement("div");t.classList.add("roomCreationFriendItem"),t.classList.add("standardButton"),t.innerHTML='\n                        <p class="friendsRoomEntryText">'.concat(e.user_name,'</p>\n                        <button id="roomInviteFriend').concat(o,'" class="standardButton friendItemButtons">\n                            <img src="/IMG/send_icon.png" alt="send invite" class="sendIcon">\n                        </button>\n                        '),t.id="roomFriendEntry"+o,document.getElementById("roomCreationFriendsBox").appendChild(t),document.getElementById("roomFriendEntry"+o).addEventListener("click",(function(){(0,l.nk)(e.id,!1,!0)})),document.getElementById("roomInviteFriend"+o).addEventListener("click",(function(t){t.stopPropagation(),(0,m.zx)(e.id,!1)}))}})),document.getElementById("roomCreationFriendsBox").innerHTML?(document.getElementById("friendsInviteDisplay").style.display="block",setTimeout((function(){document.getElementById("roomCreationFriendsBox").style.maxHeight=""}),50)):document.getElementById("friendsInviteDisplay").style.display="none",e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.error("In-Code error loading friends to invite: "+e.t0);case 20:e.next=23;break;case 22:console.error("Error loading friends for room creation: "+n.status);case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),console.error("Fetch/Network error occurred while loading friends for room creation: ",e.t1);case 28:case"end":return e.stop()}}),e,null,[[0,25],[7,17]])})))).apply(this,arguments)}function ot(e,t){var n=Number(T.textContent);T.textContent=(0,o.qE)(n+e,2,10),t&&(0,p.Ak)("change_value")}function at(e,t){var n=Number(M.textContent);M.textContent=(0,o.qE)(n+e,10,300),t&&(0,p.Ak)("change_value")}function it(e,t){D=(0,o.qE)(D+e,1,5),N.textContent=1==D?"no":D,t&&(0,p.Ak)("change_value")}function ct(e){document.getElementById("smallJoinCounter").textContent=e+1,"Start"==k.textContent&&(e+1<D||0==e)?(k.style.opacity="0.5",k.style.pointerEvents="none"):(k.style.opacity="1",k.style.pointerEvents="auto")}function st(){var e=D,t=1,n={},r=[];if(e>1)for(var o=1;o<=e;o++)n[o]=[];if(ge.forEach((function(o){if(1===e)r.push(o[1]);else{var a=t;n[a].push(o[1]),o[4]=a,t=t%e+1}})),1===e)document.getElementById("teamsDisplayText").textContent="No team: "+r.join(", ");else{for(var a="",i=1;i<=e;i++)n[i].length>0&&(a+="Team ".concat(i,": ").concat(n[i].join(", "),"\n"));document.getElementById("teamsDisplayText").innerText=a.trim()}}function lt(e){return ge.find((function(t){return t[0]===e}))[4]}Y.addEventListener("click",(function(){(0,p.Ak)("basic_button"),Qe("main")})),I.addEventListener("click",(function(){I.style.pointerEvents="none",I.style.opacity="0.5",(0,p.Ak)("start_button"),tn(en(document.getElementById("roomCodeInput").value))})),document.getElementById("roomCodeInput").addEventListener("keydown",(function(e){document.activeElement!==document.getElementById("roomCodeInput")||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I.style.pointerEvents="none",I.style.opacity="0.5",(0,p.Ak)("start_button"),tn(en(document.getElementById("roomCodeInput").value)))})),document.getElementById("roomCodeInput").addEventListener("input",tt),k.addEventListener("click",(function(){Wt(T.textContent,M.textContent)})),L.addEventListener("click",(function(){ot(1,!0)})),S.addEventListener("click",(function(){ot(-1,!0)})),C.addEventListener("click",(function(){at(10,!0)})),A.addEventListener("click",(function(){at(-10,!0)})),P.addEventListener("click",(function(){it(1,!0)})),_.addEventListener("click",(function(){it(-1,!0)})),J.addEventListener("click",(function(){ut(),(0,p.Ak)("basic_button")}));var $="standard",V=["standard","nmpz","grayscale","invert","hue","fade"],X=0;function ut(){switch(X="Standard"==J.textContent?1:(X+1)%V.length,$=V[X]){case"nmpz":J.textContent="No move (NMPZ)";break;case"grayscale":J.textContent="Grayscale";break;case"invert":J.textContent="Invert Colors";break;case"hue":J.textContent="Hue Shift";break;case"fade":J.textContent="Blink (Fade)";break;default:J.textContent="Standard"}yn($)}var K,Z=!1;function dt(){(0,i.qR)(!0);var e=document.getElementById("categoryMenuButton"),t=document.getElementById("timerButton");Z?(e.style.opacity="0.5",e.style.pointerEvents="none",(0,i.Zv)(!1),t.style.opacity="0.5",t.style.pointerEvents="none",document.getElementById("mapModeIndicator").style.display="flex",document.getElementById("multiplayerChat").style.display="flex",document.getElementById("multiplayerLeave").style.display="block",document.getElementById("revealCompass").style.bottom="calc(50% - 10px)",document.getElementById("mapModeText").textContent="Multiplayer (Awaiting info..)",document.querySelectorAll(".mobileHideInMultiplayer").forEach((function(e){e.style.pointerEvents="none",e.style.opacity="0.5"})),document.getElementById("countryGuesserSelector").style.display="none","0%"!=document.getElementById("EndOverlay").style.opacity&&(0,i.Q8)()):(e.style.opacity="1",e.style.pointerEvents="auto",(0,i.Zv)(!0),t.style.opacity="1",t.style.pointerEvents="auto",document.getElementById("mapModeIndicator").style.display="none",document.getElementById("multiplayerChat").style.display="none",document.getElementById("multiplayerLeave").style.display="none",document.getElementById("revealCompass").style.bottom="calc(50% - 40px)",document.querySelectorAll(".mobileHideInMultiplayer").forEach((function(e){e.style.pointerEvents="auto",e.style.opacity="1"})))}function pt(){(0,d.qJ)(),he&&(K=setTimeout((function(){mt()}),2e3))}var Q,ee=!1,te=!1;function mt(){if(ee)console.warn("Multiplayer round already ended!");else{if(he){clearTimeout(K),Xt("roundOver",Le),document.getElementById("nextRound").style.opacity="0.5",document.getElementById("nextRound").style.pointerEvents="none";var e=xe?5e3:2e3;document.getElementById("nextRoundText").textContent="Wait "+e/1e3+"s...",setTimeout((function(){document.getElementById("nextRoundText").textContent="Skip",document.getElementById("nextRound").style.opacity="1",document.getElementById("nextRound").style.pointerEvents="auto"}),e),xe&&(Q=setTimeout((function(){(0,u.jv)()}),1e4))}else document.getElementById("nextRound").style.opacity="0.5",document.getElementById("nextRound").style.pointerEvents="none",document.getElementById("nextRoundText").textContent="Waiting...";te||(0,i.ry)(d.MN,d.b5);try{je.stopTimer()}catch(e){}ee=!0}}var ne=!1;function yt(){ne||(null!=localStorage.getItem("username")?Tt("System: "+localStorage.getItem("username")+" guessed."):Tt("System: "+ue+" guessed.")),he?ne||(Le.push([d.MN,d.b5,l.n9,null!=localStorage.getItem("username")?localStorage.getItem("username"):ue]),ft()):ne||rn("guessed",{lat:d.MN,long:d.b5,style:l.n9,name:null!=localStorage.getItem("username")?localStorage.getItem("username"):ue}),ne=!0,xe&&(he?(Xt("timeReduce",15),zt(15,!0)):rn("timeReduce",15))}var re=0;function ft(){Z&&--re<=0&&mt()}function ht(){Xt("showPlayersArrayAfterRound",ge),dn(!0,"Results from round "+le,ge)}function gt(e,t){var n=ge.findIndex((function(t){return t[0]===e}));if(-1!=n){var r=ge[n][3]+t;ge[n][3]=r}}var oe,ae,ie,ce="standard",se=0,le=1;function vt(e){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++){var o=Math.floor(36*Math.random());n+=t.charAt(o)}return n}var ue="none set";function Et(){return bt.apply(this,arguments)}function bt(){return(bt=Ke(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.$U)("https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js","Peer",(function(e){return new e(R,{config:{iceServers:[{urls:"stun:fastturn.pro:5349",username:"paulplaystudio",credential:"GTFS-GTKU-TRES"},{urls:"stun:stun.l.google.com:19302"},{urls:"turns:fastturn.pro:5349",username:"paulplaystudio",credential:"GTFS-GTKU-TRES"},{urls:"turn:fastturn.pro:3478",username:"paulplaystudio",credential:"GTFS-GTKU-TRES"}]}})}));case 2:return oe=e.sent,e.abrupt("return",oe);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null!=localStorage.getItem("id")?R="openguessr_"+localStorage.getItem("id")+vt(2):(R="openguessr_g"+vt(7),De=(He=["Giraffe","Ape","Sloth","Penguin","Kangaroo","Panda","Zebra","Llama","Hippo","Parrot","Cat","Dog","Slug","Crow","Elephant"])[Math.floor(Math.random()*He.length)],ue="Guest"+De);try{await Et()}catch(fn){console.error("Could not inizialize PeerJS: "+fn)}var de,pe,me=new URLSearchParams(window.location.search),ye=!1,fe=me.get("join");function wt(){if(ye){if(oe)try{xt(!0),tn(fe)}catch(e){console.error("Tried to join via link with initizalized peer, but there was an exception when joining.")}else console.error("Tried to join round via link, but peerjs was not initialized yet.");ye=!1,history.replaceState({},document.title,window.location.pathname)}}function xt(e){e?(document.getElementById("linkjoinWindow").style.display="block",document.getElementById("blackBackground").style.visibility="visible"):(document.getElementById("linkjoinWindow").style.display="none",document.getElementById("blackBackground").style.visibility="hidden")}function It(){l.FT>0?navigator.clipboard.writeText(window.location.origin+"/?join="+pe.replace("openguessr_","")).then((function(){document.getElementById("linkIcon").src="/IMG/link_success_icon.png",setTimeout((function(){document.getElementById("linkIcon").src="/IMG/link_icon.png"}),700)})).catch((function(e){document.getElementById("linkIcon").src="/IMG/link_error_icon.png",console.error("Copy error: "+e),setTimeout((function(){document.getElementById("linkIcon").src="/IMG/link_icon.png"}),700)})):(0,i.WV)("Supporter tier required","Sharing invite links is a supporter-exclusive feature as it leads to higher API usage.<br><br> Please join using the room code or the friend invite system instead if you do not wish to purchase a supporter tier.",(function(){(0,i.Vn)()}),!1,!1,!1,!1,!0)}fe&&(console.log("Attempting join via Room Code Link:",fe),ye=!0),document.getElementById("linkJoinClose").addEventListener("click",(function(){(0,p.Ak)("basic_button"),xt(!1)})),document.getElementById("roomcodeLink").addEventListener("click",(function(){It(),(0,p.Ak)("basic_button")}));var he=!1,ge=[],ve=document.getElementById("multiplayerMessageBox");function kt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Ke(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e){var t=e.toLowerCase();return n.some((function(e){return t.includes(e)}))},n=["hate ","idiot","fuck","asshole","suck ass","nigg","pussy","kill y","cock","bastard","suck"],r(t)?Lt("System: Censored Profanity"):Lt(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lt(e){var t=St(e);ve.innerHTML+="<br>",t.startsWith("System:")?ve.innerHTML+='<span style="color: #c1c1c1;">'.concat(t,"</span>"):ve.innerHTML+=t,document.getElementById("multiplayerChatMessages").scrollTop=document.getElementById("multiplayerChatMessages").scrollHeight}function St(e){return e.replace(/<[^>]*>?/gm,"")}function Tt(e){try{he?(kt(e),Xt("chat",e)):rn("chat",e)}catch(e){console.error("Error sending multiplayer message: "+e)}}var Ee=document.getElementById("multiplayerMessageInput");function Ct(){""!=Ee.value&&(null!=localStorage.getItem("username")?Tt(localStorage.getItem("username")+": "+Ee.value):Tt(ue+": "+Ee.value),Ee.value="")}document.getElementById("multiplayerSendButton").addEventListener("click",(function(){Ct(),(0,p.Ak)("basic_button")})),Ee.addEventListener("keydown",(function(e){document.activeElement!==Ee||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Ct())})),Ee.addEventListener("keydown",(function(e){" "===e.key&&e.stopPropagation()}));var be=0,we=!1,xe=!1,Ie=!1;function At(e){xe=e}function Mt(e){Ie=e}var ke=document.getElementById("multiplayerDuelInfo");function Pt(e){ke.textContent=e;try{e.toLowerCase().includes("wait")?ke.classList.add("loading"):ke.classList.remove("loading")}catch(e){console.error("Failed to animate loading text in multiplayer js: "+e)}}function _t(){return Nt.apply(this,arguments)}function Nt(){return(Nt=Ke(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:be=0,we=!0,xe=!0,qt(),Pt("Starting..."),Ot(be);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e){return jt.apply(this,arguments)}function jt(){return(jt=Ke(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt(0==t?"Requesting roomcode...":"Requesting new roomcode..."),n="default",e.prev=2,e.next=5,fetch("https://accounts.openguessr.com/accounts/rooms/"+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if(!(r=e.sent).ok){e.next=13;break}return e.next=9,r.json();case 9:n=(n=e.sent).code,e.next=16;break;case 13:console.error("Error fetching room code:",r.status),Pt("Bad Get Request response: "+r.status),Gt();case 16:e.next=24;break;case 18:e.prev=18,e.t0=e.catch(2),console.error("Error occurred when trying to fetch room code: ",e.t0),Pt("Couldn't send get request"),we=!1,qt();case 24:if(null!=n&&"default"!=n)tn(n);else if(null==n){Y.style.opacity="0.2",w.style.opacity="0.2",Y.style.pointerEvents="none",w.style.pointerEvents="none";try{(0,u.X$)("standard",!1)}catch(e){console.error("Error changing category to standard for multiplayer duels. Error: "+e)}Jt(5,60),Rt()}case 25:case"end":return e.stop()}}),e,null,[[2,18]])})))).apply(this,arguments)}function Gt(){be<10?Ot(++be):(we=!1,qt())}function Rt(){return Ft.apply(this,arguments)}function Ft(){return(Ft=Ke(ze().mark((function e(){var t,n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={id:localStorage.getItem("id")},e.next=4,fetch("https://accounts.openguessr.com/accounts/rooms/host/"+pe.replace("openguessr_",""),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("bearer")},body:JSON.stringify(t)});case 4:(n=e.sent).ok?setTimeout((function(){we&&(Pt("No match found. Please retry"),we=!1,qt(),on(),Ht())}),1e4):(console.error("Failed sending the Room Code to the server: "+n.status),Pt("Error sending roomcode to server: "+n.status),we=!1,qt()),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed making a post request to the server: ",e.t0),Pt("Error making a request to server: "+e.t0),we=!1,qt();case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Ht(){return Dt.apply(this,arguments)}function Dt(){return(Dt=Ke(ze().mark((function e(){var t,n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={id:localStorage.getItem("id")},e.next=4,fetch("https://accounts.openguessr.com/accounts/rooms/delete/"+pe.replace("openguessr_",""),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("bearer")},body:JSON.stringify(t)});case 4:(n=e.sent).ok||(console.warn("Failed deleting the Room Code from the server: "+n.status),Pt("Error deleting roomcode from server: "+n.status)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed making a delete request to the server: ",e.t0),Pt("Error making a request to server: "+e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function qt(){we?(O.style.pointerEvents="none",O.style.opacity="0.5"):(O.style.pointerEvents="auto",O.style.opacity="1",Y.style.opacity="0.5",w.style.opacity="1",Y.style.pointerEvents="auto",w.style.pointerEvents="auto")}function zt(e,t){var n,r;if(e=Number(e),clearTimeout(n),clearTimeout(r),t)document.getElementById("duelsOverlay").style.opacity="0";else try{je.isTimerRunning()&&je.getRemainingTime()>3&&(document.getElementById("duelsOverlay").style.opacity="1",document.getElementById("duelsOverlay").style.transform="scale(1.03)",document.getElementById("duelsOverlay").style.filter="none",(0,p.Ak)("time_reduced"),n=setTimeout((function(){document.getElementById("duelsOverlay").style.opacity="0",document.getElementById("duelsOverlay").style.transform="scale(1.0)",document.getElementById("duelsOverlay").style.filter="blur(5px)"}),2e3),r=setTimeout((function(){document.getElementById("duelsOverlay").style.filter="none"}),3e3))}catch(e){console.warn("Error showing time reduce overlay: "+error)}if(0!=e)try{je.isTimerRunning()&&je.getRemainingTime()>e?(je.stopTimer(),je=(0,c.I)(e,pt),document.getElementById("duelsOverlaySubtitle").textContent="Time reduced to ".concat(e,"s.")):document.getElementById("duelsOverlaySubtitle").textContent="Time remains unaffected."}catch(e){document.getElementById("duelsOverlaySubtitle").textContent="Time error occured.",console.warn("Could not set new timer for duels in showTimerReduceOverlay"+e)}}O.addEventListener("click",(function(){_t(),(0,p.Ak)("basic_button")}));var Be=!1;oe&&oe.on("open",(function(e){pe=e,Be=!0}));var Le=[],Se=!1,Te=1,Ce=1;function Ut(e){var t=ge.findIndex((function(t){return t[0]===e}));-1!==t&&ge.splice(t,1)}oe?oe.on("open",(function(e){oe.on("connection",(function(e){if(Ae)setTimeout((function(){e.close()}),1e3);else{(we||Ie)&&(Ae=!0);var t=setTimeout((function(){e.open||(Ae=!1,e.close(),Tt("System: "+e.metadata.username+" kicked (no response from peer)."))}),2e3);e.on("open",(function(){-1==ge.findIndex((function(t){return t[0]==e.peer}))?(ge.push([e.peer,e.metadata.username,e.metadata.level,e.metadata.score,1,e.metadata.id,e.metadata.badge]),e.metadata.supporterLevel>Ce&&(Ce=e.supporterLevel)):setTimeout((function(){e.close(),Tt("System: "+e.metadata.username+" kicked (duplicate).")}),500),ct(++se),st(),clearTimeout(t);var n={type:"initialize",content:{roundAmount:ae,currentRound:le,roundLength:ie,teamAmount:D,team:lt(e.peer),multiplayerRestriction:$,category:ce}};if(e.send(n),Tt("System: "+e.metadata.username+" joined."),Se){var r={type:"lateJoin",content:ge};e.send(r)}else Xt("showPlayersArray",ge),dn(!0,"Waiting...",ge);we&&(Ht(),Yt()),Ie&&Yt()})),e.on("data",(function(t){"guessed"==t.type&&(Le.push([t.content.lat,t.content.long,t.content.style,t.content.name]),ft()),"score"==t.type&&gt(e.peer,t.content),"chat"==t.type&&Tt(t.content),"teamMarkers"==t.type&&(Qt(t.content.id,t.content.lat,t.content.long,t.content.pin,t.content.team),Xt("teamMarkers",Me),D>1&&(0,d.xA)(Me)),"timeReduce"==t.type&&(Xt("timeReduce",t.content),zt(t.content,!!ne))})),e.on("close",(function(){ct(--se),Ut(e.peer),st(),Tt("System: "+e.metadata.username+" left."),Se?ft():(Xt("showPlayersArray",ge),dn(!0,"Waiting...",ge))}))}}))})):console.warn("PeerJS not initialized -> Host Logic failed!");var Ae=!0;function Wt(e,t){var n;"Start"!=k.textContent?(Jt(e,t),n=pe.replace("openguessr_",""),F.style.display="flex",H.style.display="none",document.getElementById("roomCodeDisplay").textContent=n,document.getElementById("roomCreationModes").style.display="none",document.getElementById("roomCreationTeams").style.display="none",document.getElementById("roomCreationMap").style.display="none",document.getElementById("roomcodeLink").style.display="block",document.getElementById("friendsInviteDisplay").style.display="none",s.wR&&nt(),k.textContent="Start",ct(0),st(),(0,p.Ak)("basic_button")):(Yt(),(0,p.Ak)("start_button"))}function Jt(e,t){Pt("Room created. Please wait <10s"),he=!0,Se=!1,ce=u.BI,(0,u.FB)(ce)||(ce="standard"),ge.push([pe,null==localStorage.getItem("username")?ue:localStorage.getItem("username"),(0,s.ki)(localStorage.getItem("experience")).level,0,1,localStorage.getItem("id"),l.PE]),Te=1,dn(!0,"Waiting...",ge),ae=e,ie=t,Ce=l.FT||0,Ae=!1}function Yt(){k.textContent="Loading Location...",Pt("Starting! Loading location..."),Z=!0,dt(),dn(!0,"Ready...",ge),Xt("showPlayersArray",ge),(0,u.JS)(),xe&&(Ae=!0),we=!1}function $t(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=Ke(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le=[],Me=[],re=se+1,Se){e.next=8;break}Ze("close"),Se=!0,e.next=15;break;case 8:if(!(++le>ae)){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,new Promise((function(e){setTimeout(e,1500)}));case 15:Xt("start",{coordinates:[t,n],highestSupporterLevel:Ce}),Tt("System: Starting Round "+le),mn();case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e,t){ge.forEach((function(n){var r=n[0];if(r){var o=oe.connections[r];o&&o.length>0&&o.forEach((function(n){n.send({type:e,content:t})}))}}))}function Kt(){if(he){if(oe&&0!=se)try{for(var e in oe.connections)oe.connections[e].forEach((function(e){e.close()}))}catch(e){console.error("Error disconnecting all peers in multiplayer js: "+e)}we&&Ht()}se=0,ge=[],st(),ct(se)}var Me=[];function Zt(e,t){Z&&(he?(Qt(pe,e,t,l.n9,Te),Xt("teamMarkers",Me)):rn("teamMarkers",{id:pe,lat:e,long:t,pin:l.n9,team:Te}))}function Qt(e,t,n,r,o){var a=Me.findIndex((function(t){return t[0]==e}));-1!==a&&Me.splice(a,1),Me.push([e,t,n,r,o])}function en(e){return e.replace(/\s/g,"")}function tn(e){return nn.apply(this,arguments)}function nn(){return(nn=Ke(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Be){e.next=3;break}return e.next=3,new Promise((function(e){oe.on("open",(function(){e()}))}));case 3:he=!1,Se=!1,et("Attempting join..."),Pt("Attempting join..."),n={metadata:{username:null==localStorage.getItem("username")?ue:localStorage.getItem("username"),level:(0,s.ki)(localStorage.getItem("experience")).level,score:0,id:localStorage.getItem("id"),badge:l.PE,supporterLevel:l.FT}},(de=oe.connect("openguessr_"+t,n)).on("open",(function(){et("Connection opened..."),Pt("Connection opened...")})),de.on("data",(function(e){if("initialize"===e.type&&(et("Joined!"),Pt("Joined!"),Z=!0,dt(),Ze("close"),xt(!1),we=!1,ae=e.content.roundAmount,ie=e.content.roundLength,D=e.content.teamAmount,$=e.content.multiplayerRestriction,ce=e.content.category,Te=e.content.team,le=e.content.currentRound),"showPlayersArray"===e.type&&dn(!0,"Starting soon...",e.content),"lateJoin"===e.type&&(Se=!0,te=!0,dn(!0,"Wait for next round...",e.content,!0)),"showPlayersArrayAfterRound"===e.type&&dn(!0,"Results from round "+le,e.content),"start"===e.type){try{f=e.content.coordinates,Ce=e.content.highestSupporterLevel}catch(e){console.error("Error receiving locations and supporter level from the host in multiplayer.js Error: ",e)}Se&&le++,Se=!0,Me=[],te=!1,(0,u.JS)(),mn()}"roundOver"===e.type&&(Le=e.content,mt()),"chat"===e.type&&kt(e.content),"teamMarkers"===e.type&&(Me=e.content,D>1&&(0,d.xA)(Me)),"closeResultScreen"===e.type&&(0,u.jv)(),"rematch"===e.type&&(ee=!1,ne=!1,Se=!1,le=1),"timeReduce"===e.type&&zt(e.content,!!ne)})),de.on("close",(function(){Z&&(on(),(0,a.N)("Disconnected from room","The connection to the host was closed.","",!1,!0)),Z||(et("Room locked."),tt(),we&&(Pt("Room locked."),Gt()))}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rn(e,t){try{de.send({type:e,content:t})}catch(e){Z&&(0,a.N)("Error sending peer2peer message","Couldn't send message to host.","Host unreachable"),console.error("Error messaging host: "+e)}}function on(){var e=!1;if(Z&&(Z=!1,e=!0),he)Kt();else if(de)try{de.close()}catch(e){console.error("Error when closing connection in multiplayer js: "+e)}try{je.stopTimer()}catch(e){}clearInterval(Ge),clearTimeout(K),Z=!1,dt(),dn(!1),zt(0,!0),le=1,Te=1,Se=!1,Ae=!0,Le=[],Me=[],(0,d.xA)(Me),ge=[],ee=!1,ne=!1,$="standard",ve.textContent="",we=!1,he=!1,xe=!1,te=!1,Ce=1,Ie=!1,document.getElementById("guessText").textContent="Guess",document.getElementById("confirmButton").style.pointerEvents="auto","country"!=u.BI&&(document.getElementById("map").style.visibility="visible",(0,i.uc)(!1)),document.getElementById("nextRound").style.opacity="1",document.getElementById("nextRound").style.pointerEvents="auto",document.getElementById("nextRoundText").textContent="Next round",Pe.style.display="none",_e.style.display="none",_e.style.opacity="1",_e.style.pointerEvents="auto",_e.textContent="Play again",yn("standard"),e&&(0,u.JS)()}oe&&(oe.on("disconnected",(function(){oe.reconnect(),console.log("Disconnected from signalling server. Attempting to reconnect...")})),oe.on("error",(function(e){console.error("PeerJS: "+e),Z?("network"!=e.type?(0,a.N)("Multiplayer error","Fatal multiplayer error. Please reload if you want to use multiplayer.",e.type,!0):(0,a.N)("Disconnected from round","You have left the multiplayer round due to network issues. Check your and the host's connection.",e.type,!1),on()):(et("Failed to join."),tt()),we&&("peer-unavailable"!=e.type||he?(Pt("Please try again. Error: "+e.type),we=!1,qt()):Gt(),he&&Ht())})),oe.on("close",(function(){(0,a.N)("Multiplayer connection closed","Your multiplayer connection was permanently closed. Please reload the page.","Error: Connection Closed",!1),Z&&on(),he&&we&&Ht(),oe.destroy()}))),document.getElementById("multiplayerLeave").addEventListener("click",(function(){(0,i.WV)("Leave match?","You are about to leave the multiplayer room. Are you sure?",on,!1),(0,p.Ak)("leave_round")}));var Pe=document.getElementById("endMultiplayerRoundButton"),_e=document.getElementById("endMultiplayerRematchButton");Pe.addEventListener("click",(function(){on(),(0,p.Ak)("leave_round")})),_e.addEventListener("click",(function(){ee=!1,ne=!1,Se=!1,le=1,ge.forEach((function(e){e[3]=0})),Xt("rematch"),setTimeout((function(){Yt()})),_e.style.opacity="0.5",_e.style.pointerEvents="none",_e.textContent="Loading...",(0,p.Ak)("basic_button")}));var Ne=[200,0,120,60,300];function an(e){var t=Ne[(e-1)%Ne.length];return"hsla(".concat(t,", 87.9%, 64.3%, 0.3)")}function cn(e){var t=["Blue","Red","Green","Yellow","Purple"];return t[(e-1)%t.length]}function sn(e){e?(Pe.style.display="block",he?(Pe.textContent="End Round",xe&&!Ie||(_e.style.display="block",_e.style.opacity="1",_e.style.pointerEvents="auto",_e.textContent="Play again")):Pe.textContent="Leave Round"):(Pe.style.display="none",_e.style.display="none")}var Oe=0;function ln(){var e;clearTimeout(e),e=setTimeout((function(){(0,p.Ak)("win_sound");var e=document.getElementById("multiplayerTitle");e.style.animation="none",e.offsetHeight,e.style.animation="multiplayerTitleWin 1s ease-in-out"}),1500)}function un(){var e;clearTimeout(e),e=setTimeout((function(){(0,p.Ak)("lose_sound");var e=document.getElementById("multiplayerTitle");e.style.animation="none",e.offsetHeight,e.style.animation="multiplayerTitleLose 1s ease-in-out"}),1500)}function dn(e,t,n,r){var o=document.getElementById("multiplayerTable");if(e){o.innerHTML="",document.getElementById("multiplayerFade").style.opacity="1",document.getElementById("multiplayerFade").style.pointerEvents="auto",document.getElementById("multiplayerTitle").textContent=t,Se||(document.getElementById("mapModeText").textContent="Multiplayer ("+ce.replace("community_","")+")");var a=pe,c="";if(D>1){var d={};n.forEach((function(e){var t=e[4];d[t]||(d[t]={color:an(t),colorName:cn(t),players:[]}),d[t].players.push(e)}));var p=Object.keys(d).sort((function(e,t){var n=d[e].players.reduce((function(e,t){return e+t[3]}),0);return d[t].players.reduce((function(e,t){return e+t[3]}),0)-n})),m=p[0];if(le>=ae){var y=d[m].colorName;document.getElementById("multiplayerTitle").textContent="Team ".concat(y," won!"),sn(!0),Te==m?ln():un()}else sn(!1);p.forEach((function(e){d[e].players.sort((function(e,t){return t[3]-e[3]})),d[e].players.forEach((function(t){Oe++;var n=Ue(t,7),r=n[0],i=n[1],s=n[2],u=n[3],p=(n[4],n[5]),m=n[6],y=d[e].color,f=p?"":" entryNotClickable",h=document.createElement("div");(r==a?(h.className="multiplayerOverlayEntry yourMultiplayerOverlay",h.style="background-image: linear-gradient(90deg, transparent 60%, ".concat(y,")"),c='\n                            <div class="multiplayerEntryPlayerInfo">\n                                <div id="usernameOverlayField'.concat(Oe,'" class="multiplayerEntryPlayerName').concat(f,'">').concat(i," (Lvl. ").concat(s,')<div class="multiplayerBadge" id="newBadgeDiv').concat(Oe,'"></div></div>\n                                <div class="multiplayerEntryPlayerScore">Score: ').concat(u.toLocaleString(),"</div>\n                            </div>\n                    ")):(h.className="multiplayerOverlayEntry",h.style="background-image: linear-gradient(90deg, transparent 60%, ".concat(y,")"),c='\n                            <div class="multiplayerEntryPlayerInfo">\n                                <div id="usernameOverlayField'.concat(Oe,'" class="multiplayerEntryPlayerName').concat(f,'">').concat(i," (Lvl. ").concat(s,')<div class="multiplayerBadge" id="newBadgeDiv').concat(Oe,'"></div></div>\n                                <div class="multiplayerEntryPlayerScore">Score: ').concat(u.toLocaleString(),"</div>\n                            </div>\n                    ")),h.innerHTML=c,o.appendChild(h),m)&&document.getElementById("newBadgeDiv"+Oe).appendChild(pn(m));if(p)try{document.getElementById("usernameOverlayField"+Oe).addEventListener("click",(function(){(0,l.nk)(p,!1,!0)}))}catch(e){console.error("Error in showMultiplayerOverlay: "+e)}}))}))}else{if(n.sort((function(e,t){return t[3]-e[3]})),le>=ae&&!r){var f=n[0],h=f[1],g=f[5];document.getElementById("multiplayerTitle").textContent=h+" won!",localStorage.getItem("id")==g?ln():un(),xe&&s.wR&&!Ie&&(g==localStorage.getItem("id")?(0,l.cm)():(0,l.DL)()),sn(!0)}else sn(!1);n.forEach((function(e){Oe++;var t=Ue(e,7),n=t[0],r=t[1],i=t[2],s=t[3],u=(t[4],t[5]),d=t[6],p=document.createElement("div"),m=u?"":" entryNotClickable";(n==a?(p.className="multiplayerOverlayEntry yourMultiplayerOverlay",c='\n                        <div class="multiplayerEntryPlayerInfo">\n                            <div id="usernameOverlayField'.concat(Oe,'" class="multiplayerEntryPlayerName').concat(m,'">').concat(r," (Lvl. ").concat(i,')<div class="multiplayerBadge" id="newBadgeDiv').concat(Oe,'"></div></div>\n                            <div class="multiplayerEntryPlayerScore">Score: ').concat(s.toLocaleString(),"</div>\n                        </div>\n                ")):(p.className="multiplayerOverlayEntry",c='\n                        <div class="multiplayerEntryPlayerInfo">\n                            <div id="usernameOverlayField'.concat(Oe,'" class="multiplayerEntryPlayerName').concat(m,'">').concat(r," (Lvl. ").concat(i,')<div class="multiplayerBadge" id="newBadgeDiv').concat(Oe,'"></div></div>\n                            <div class="multiplayerEntryPlayerScore">Score: ').concat(s.toLocaleString(),"</div>\n                        </div>\n                ")),p.innerHTML=c,o.appendChild(p),d)&&document.getElementById("newBadgeDiv"+Oe).appendChild(pn(d));if(u)try{document.getElementById("usernameOverlayField"+Oe).addEventListener("click",(function(){(0,l.nk)(u,!1,!0)}))}catch(e){console.error("Error in showMultiplayerOverlay: "+e)}}))}document.getElementById("confirmButton").style.pointerEvents="none",document.getElementById("map").style.visibility="hidden",(0,i.uc)(!0),document.getElementById("revealCompass").style.visibility="hidden",zt(0,!0)}else document.getElementById("multiplayerFade").style.opacity="0",document.getElementById("multiplayerFade").style.pointerEvents="none",(Z||"country"!=u.BI)&&(document.getElementById("map").style.visibility="visible",(0,i.uc)(!1),document.getElementById("revealCompass").style.visibility="visible")}var je,Ge,Re=0;function pn(e){if(!e)return"";Re++;try{var t=document.getElementById(e).cloneNode(!0);return t.classList.remove("badgeSelected"),t.classList.remove("badgeLocked"),t.id="multiplayerOverlayBadge"+Re,t}catch(t){console.error("Couldn't load multiplayer badge with id "+e+". Error: "+t)}}function mn(){ee=!1,ne=!1;var e=document.getElementById("multiplayerTitle"),t=3;Ge=setInterval((function(){if(t>0)e.textContent="Starting... ".concat(t),t--,(0,p.Ak)("match_countdown");else if(clearInterval(Ge),Z){dn(!1),document.getElementById("guessText").textContent="Guess";try{je.stopTimer()}catch(e){}je=(0,c.I)(ie,pt),document.getElementById("mapModeText").textContent="Multiplayer (Round: "+le+"/"+ae+")","standard"!=$&&$&&(document.getElementById("mapModeText").textContent+=" ("+$+")"),re=se+1,yn($),(0,p.Ak)("match_countdown_start")}}),1e3)}var Fe=document.getElementById("GuesserWindow");function yn(e){switch(B.style.pointerEvents="none",B.style.backgroundColor="transparent",Fe.style.filter="none",Fe.style.animation="none",e){case"nmpz":B.style.pointerEvents="auto";break;case"grayscale":Fe.style.filter="grayscale(100%)";break;case"invert":Fe.style.filter="invert(100%)";break;case"hue":Fe.style.filter="hue-rotate(90deg)";break;case"fade":B.style.backgroundColor="black",B.style.animation="restrictionFade 2s infinite"}}r()}catch(hn){r(hn)}var He,De}),1)},47:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{DL:()=>H,Dl:()=>f,Er:()=>O,FT:()=>y,HT:()=>J,ID:()=>U,PE:()=>w,b0:()=>re,cQ:()=>T,cm:()=>q,hs:()=>C,n9:()=>E,nk:()=>A,vW:()=>te});var o=n(634),a=n(49),i=n(560),c=n(880),s=n(960),l=n(340),u=e([i,s,l]);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function B(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */B=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new P(r||[]);return o(i,"_invoke",{value:T(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",y="executing",f="completed",h={};function g(){}function v(){}function E(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(_([])));x&&x!==n&&r.call(x,i)&&(b=x);var I=E.prototype=g.prototype=Object.create(b);function L(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==k(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=C(c,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?f:m,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(k(t)+" is not iterable")}return v.prototype=E,o(I,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:v,configurable:!0}),v.displayName=l(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,l(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},L(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(I),l(I,s,"Generator"),l(I,i,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function L(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){L(a,r,o,i,c,"next",e)}function c(e){L(a,r,o,i,c,"throw",e)}i(void 0)}))}}[i,s,l]=u.then?(await u)():u;var d=!1,p="none";function T(e){p=e}var m,y=0,f=0;function C(e,t){y=e,f=t}function A(e,t,n){return M.apply(this,arguments)}function M(){return(M=S(B().mark((function e(t,n,r){var o,a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&P(),e.prev=1,e.next=4,fetch("https://accounts.openguessr.com/accounts/profile/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:if(!(o=e.sent).ok){e.next=14;break}return e.next=8,o.json();case 8:return a=e.sent,n&&(a.profileData&&(p=a.profileData),y=a.supporterLevel,f=a.supportedAmount),r&&_(a.username,a.experience,a.joinedDate,n,a.profileData,a.supporterLevel,t),e.abrupt("return",!0);case 14:return console.error("Failed to load profile:",o.status),(0,c.N)("Failed to load profile","Couldn't load the user's profile.",o.status,!1,!1),e.abrupt("return",!1);case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(1),console.error("Error occurred while fetching the user: ",e.t0),(0,c.N)("Error occured while loading Profile","Couldn't load the user's profile due to network error.",e.t0,!1,!1),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}function P(){d=!1,document.getElementById("profilePopup").style.display="flex",document.getElementById("profileViewName").textContent="Loading...",document.getElementById("editUsername").style.display="none",document.getElementById("pinSelector").style.display="none",document.getElementById("accountManagementHeader").style.display="none",document.getElementById("accountManagementArea").style.display="none",document.getElementById("profileScrollSection").scrollTop="0",document.getElementById("profileAbout").style.pointerEvents="none",document.getElementById("profileAbout").value="",document.getElementById("profileAbout").style.display="none",document.getElementById("profileAboutHeader").style.display="none",document.getElementById("statisticDuelsPlayed").textContent="0",document.getElementById("statisticDuelsWon").textContent="0",document.getElementById("statisticCompetitionsEntered").textContent="0",document.getElementById("profileAbout").style.height="65px",document.getElementById("statisticExperience").innerHTML="0",document.getElementById("statisticUpgradeExperience").innerHTML="0",document.getElementById("statisticJoinedDate").textContent="loading...",document.getElementById("statisticsLevelText").textContent="0",document.getElementById("levelTextProfile").textContent="Lvl. 0",document.getElementById("statisticHighestStreak").textContent="0",document.getElementById("selectedProfilePin").src="/IMG/your_marker0.png",document.getElementById("badgeButton").style.display="none",document.getElementById("badgeArea").style.pointerEvents="none",document.getElementById("badgeArea").innerHTML="",document.getElementById("selectedProfilePin").style.pointerEvents="none",document.getElementById("supporterTag").style.display="none",document.getElementById("supporterArea").style.display="none",document.getElementById("supporterTagText").textContent="Supporter",document.getElementById("profileAddFriend").style.display="none",document.getElementById("profileAddFriend").style.opacity="1",document.getElementById("profileAddFriend").style.pointerEvents="auto",(0,s.N8)()}function _(e,t,n,r,o,a,i){return N.apply(this,arguments)}function N(){return N=S(B().mark((function e(t,n,r,o,c,s,u){var p;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=o,document.getElementById("profileViewName").textContent=t||"Guest",o&&(document.getElementById("editUsername").style.display="inline-block",document.getElementById("pinSelector").style.display="flex",document.getElementById("accountManagementHeader").style.display="block",document.getElementById("accountManagementArea").style.display="flex",document.getElementById("profileAbout").style.pointerEvents="auto",document.getElementById("profileAbout").style.display="block",document.getElementById("profileAboutHeader").style.display="block",document.getElementById("badgeButton").style.display="block",document.getElementById("badgeArea").style.pointerEvents="auto",document.getElementById("selectedProfilePin").style.pointerEvents="auto",document.getElementById("supporterArea").style.display="flex");try{c&&(c.about&&(document.getElementById("profileAbout").value=c.about,document.getElementById("profileAbout").style.display="block",document.getElementById("profileAboutHeader").style.display="block",o?window.matchMedia("(max-width: 800px)").matches&&(document.getElementById("profileAbout").style.height="115px"):(document.getElementById("profileAbout").style.height="1px",document.getElementById("profileAbout").style.height=document.getElementById("profileAbout").scrollHeight-25+"px")),c.duelsPlayed&&(document.getElementById("statisticDuelsPlayed").textContent=c.duelsPlayed),c.duelsWon&&(document.getElementById("statisticDuelsWon").textContent=c.duelsWon),c.competitionsPlayed&&(document.getElementById("statisticCompetitionsEntered").textContent=c.competitionsPlayed),c.highestStreak&&(document.getElementById("statisticHighestStreak").textContent=c.highestStreak),c.pin&&((p=new Image).onload=function(){document.getElementById("selectedProfilePin").src="/IMG/your_marker".concat(c.pin,".png")},p.onerror=function(){console.error("Image for pin not found, default image used.")},p.src="/IMG/your_marker".concat(c.pin,".png")),c.badge&&(o?ae(c.badge):ie(c.badge))),S(B().mark((function e(){var t,n;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o||!i.wR||u==localStorage.getItem("id")){e.next=11;break}return e.next=3,(0,l.on)(u);case 3:if(e.sent){e.next=11;break}t=document.getElementById("profileAddFriend"),n=t.cloneNode(!0),t.parentNode.replaceChild(n,t),document.getElementById("profileAddFriend").style.transform="scale(0)",document.getElementById("profileAddFriend").style.display="block",document.getElementById("profileAddFriend").addEventListener("click",(function(e){(0,a.Ak)("basic_button"),(0,l.UP)(u,e.target)})),setTimeout((function(){document.getElementById("profileAddFriend").style.transform="scale(1)"}),50);case 11:case"end":return e.stop()}}),e)})))(),s&&s>0&&(document.getElementById("supporterTag").style.display="flex",document.getElementById("supporterTagText").textContent="Tier "+s+" Supporter")}catch(e){console.error("Error loading data from profileData in viewProfile: "+e)}document.getElementById("statisticsLevelText").textContent=R(n).level,document.getElementById("levelTextProfile").textContent="Lvl. "+R(n).level,document.getElementById("statisticExperience").innerHTML=Number(n).toLocaleString(),document.getElementById("statisticUpgradeExperience").innerHTML=R(n).requiredForLevelUpgrade.toLocaleString(),document.getElementById("statisticJoinedDate").textContent=ee(r),setTimeout((function(){document.getElementById("profileScrollSection").style.maxHeight="calc(100dvh - 350px)"}),50);case 10:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function O(){document.getElementById("profilePopup").style.display="none",document.getElementById("profileScrollSection").style.maxHeight="300px",d&&i.wR&&F(document.getElementById("profileAbout").value)}function j(){return G.apply(this,arguments)}function G(){return(G=S(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(m=document.getElementById("usernameInput").value)){e.next=4;break}return e.next=4,(0,o.kZ)(localStorage.getItem("bearer"),localStorage.getItem("id"),m,"index").then((function(e){e&&((0,i.M0)(),document.getElementById("profileViewName").textContent=m)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){try{for(var t=1,n=5e3;e>=n;)e-=n,t++,n=Math.floor(5e3*Math.pow(1.1,t-1));return{fraction:e/n,requiredForLevelUpgrade:n-e,level:t}}catch(e){return console.error("Error calculating Experience related values in profileView.js: "+e),null}}document.getElementById("profileClose").addEventListener("click",(function(){O(),(0,a.Ak)("basic_button")})),document.getElementById("editUsername").addEventListener("click",(function(){(0,s.WV)("Update username","Input your new name into the box and click confirm.",j,!1,!0),(0,a.Ak)("basic_button")}));var h,g=new URLSearchParams(window.location.search);try{(h=g.get("profile"))&&(A(h,!1,!0),history.replaceState({},document.title,window.location.pathname))}catch(se){}var v=document.getElementById("profileAbout");function F(e,t,n,r,o,a,i){try{var c,s,l,u,d,m,y;p&&(c=p.about?p.about:""),null!=e&&(c=e),p&&(s=p.duelsPlayed),s=s||0,t&&(s+=t),p&&(l=p.duelsWon),l=l||0,n&&(l+=n),p&&(u=p.competitionsPlayed),u=u||0,r&&(u+=r),p&&(d=p.highestStreak),d=d||0,o&&d<o&&(d=o),p&&(m=p.pin),m=m||0,null!=a&&(m=a),p&&(y=p.badge),y=y||null,i&&(y=i);var f={about:c,duelsPlayed:s,duelsWon:l,competitionsPlayed:u,highestStreak:d,pin:m,badge:y};Z(f),p=f}catch(e){console.error("Error in updateProfileData: "+e)}}function H(){return D.apply(this,arguments)}function D(){return(D=S(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(localStorage.getItem("id"),!0,!1);case 2:if(!e.sent){e.next=4;break}F(null,1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return z.apply(this,arguments)}function z(){return(z=S(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(localStorage.getItem("id"),!0,!1);case 2:if(!e.sent){e.next=4;break}F(null,1,1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return W.apply(this,arguments)}function W(){return(W=S(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(localStorage.getItem("id"),!0,!1);case 2:if(!e.sent){e.next=4;break}F(null,null,null,1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return Y.apply(this,arguments)}function Y(){return(Y=S(B().mark((function e(t){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(localStorage.getItem("id"),!0,!1);case 2:if(!e.sent){e.next=5;break}p.highestStreak&&p.highestStreak,F(null,null,null,null,t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return V.apply(this,arguments)}function V(){return(V=S(B().mark((function e(t,n){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.pin&&p.pin==t){e.next=6;break}return e.next=3,A(localStorage.getItem("id"),!0,!1);case 3:if(!e.sent){e.next=5;break}F(null,null,null,null,null,t);case 5:n&&(document.getElementById("selectedProfilePin").src="/IMG/your_marker".concat(t,".png"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return K.apply(this,arguments)}function K(){return(K=S(B().mark((function e(t){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.badge&&p.badge==t){e.next=6;break}return e.next=3,A(localStorage.getItem("id"),!0,!1);case 3:if(!e.sent){e.next=6;break}w=t,F(null,null,null,null,null,null,t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return Q.apply(this,arguments)}function Q(){return(Q=S(B().mark((function e(t){var n,r;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:localStorage.getItem("id"),profileData:JSON.stringify(t)},e.next=4,fetch("https://accounts.openguessr.com/accounts/profile/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("bearer")},body:JSON.stringify(n)});case 4:(r=e.sent).ok||(console.error("Profile update failed: ",r.status),(0,c.N)("Profile update failed","The server returned an error for the profile update.",r.status,!1,!1)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error occurred during profile update: ",e.t0),(0,c.N)("Profile update failed","The profile update failed due to a network error.",e.t0,!1,!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ee(e){var t=new Date,n=new Date(e),r=Math.abs(t-n),o=Math.floor(r/864e5),a=Math.floor(o/7),i=Math.floor(o/30),c=Math.floor(o/365);return 0===o?"Today":1===o?"Yesterday":o<=7?"A few days ago":1===a?"A week ago":a<=4?"A few weeks ago":1===i?"A month ago":i<=12?"A few months ago":1===c?"A year ago":c+" years ago"}v.addEventListener("input",(function(){var e=v.value.split("\n");e.length>2&&(v.value=e.slice(0,2).join("\n"))}));var E=0;function te(){ne(E=p&&p.pin?p.pin:0,!1)}document.getElementById("selectedProfilePin").addEventListener("click",(function(){(0,a.Ak)("basic_button"),localStorage.getItem("experience"),document.querySelectorAll(".pinLock").forEach((function(e){var t=Number(e.id.replace("pinLock","")),n=b[t][0],r=b[t][1];"experience"==n&&(localStorage.getItem("experience")>=r?e.style.display="none":e.style.display="flex"),"duelWins"==n&&(p.duelsWon>=r?e.style.display="none":e.style.display="flex"),"competitionsPlayed"==n&&(p.competitionsPlayed>=r?e.style.display="none":e.style.display="flex"),"highestStreak"==n&&(p.highestStreak>=r?e.style.display="none":e.style.display="flex"),"supporter"==n&&(e.style.display=y>=r?"none":"flex")})),te(),document.getElementById("pinPopup").style.display="flex"})),document.getElementById("pinClose").addEventListener("click",(function(){(0,a.Ak)("basic_button"),document.getElementById("pinPopup").style.display="none"})),document.querySelectorAll(".pinHolder").forEach((function(e,t){e.addEventListener("click",(function(){ne(t,!0)}))}));var b=[["experience",0],["experience",5e3],["experience",3e4],["experience",1e5],["experience",5e5],["experience",5e6],["experience",1e7],["duelWins",75],["competitionsPlayed",50],["highestStreak",10],["competitionsPlayed",250],["supporter",1]];function ne(e,t){var n=document.querySelectorAll(".pinHolder");if(n.length>e){var r=n[e].querySelector(".pinLock");r&&("none"===r.style.display||""===r.style.display)||!t?(document.querySelectorAll(".pinHolder").forEach((function(e){e.classList.remove("selectedPin")})),n[e].classList.add("selectedPin"),t&&(0,a.Ak)("item_select"),null==e&&"number"!=typeof e||(E=e,t&&$(e,!0))):t&&(0,a.Ak)("pin_locked")}}var w=null;function re(){p&&(w=p.badge?p.badge:null)}function oe(){ce(),document.getElementById("badgePopup").style.display="flex",document.getElementById("badgeContainer").scrollTop="0",document.getElementById("badgeWindow").scrollTop="0"}function ae(e){try{document.querySelectorAll(".badge").forEach((function(e){e.classList.remove("badgeSelected")})),document.getElementById(e).classList.add("badgeSelected"),ie(e),X(e)}catch(e){console.error("Error selecting badge: "+e)}}function ie(e){var t=document.getElementById("badgeArea");t.innerHTML="";try{var n=document.getElementById(e);if(n){var r=n.cloneNode(!0);r.classList.remove("badgeSelected"),r.classList.remove("badgeLocked"),r.id="currentProfileBadgeSelection",t.appendChild(r),document.getElementById("badgeButton").style.display="none"}}catch(e){console.error("Error setting profile badge: "+e)}}function ce(){try{document.querySelectorAll(".badge").forEach((function(e){"currentProfileBadgeSelection"==e.id||e.id.includes("multiplayer")||e.classList.add("badgeLocked")}));for(var e="Unlock next at ",t=document.getElementById("experienceBadgeStatus"),n=document.getElementById("duelsBadgeStatus"),r=document.getElementById("competitionsBadgeStatus"),o=document.getElementById("streakBadgeStatus"),a=document.getElementById("supporterBadgeStatus"),i=0,c=0,s=[5e4,25e4,1e6,1e7];c<s.length;c++){var l=s[c];if(i++,t.textContent=e+l.toLocaleString()+" XP",!(l<=localStorage.getItem("experience")))break;document.getElementById("expBadge"+i).classList.remove("badgeLocked"),4==i&&(t.textContent="All unlocked")}var u=0,d=0;p&&p.duelsWon&&(d=p.duelsWon);for(var m=0,f=[5,50,100,500];m<f.length;m++){var h=f[m];if(u++,n.textContent=e+h.toLocaleString()+" Wins",!(h<=d))break;document.getElementById("duelBadge"+u).classList.remove("badgeLocked"),4==u&&(n.textContent="All unlocked")}var g=0,v=0;p&&p.competitionsPlayed&&(v=p.competitionsPlayed);for(var E=0,b=[10,50,100,500];E<b.length;E++){var w=b[E];if(g++,r.textContent=e+w.toLocaleString()+" Entries",!(w<=v))break;document.getElementById("compBadge"+g).classList.remove("badgeLocked"),4==g&&(r.textContent="All unlocked")}var x=0,I=0;p&&p.highestStreak&&(I=p.highestStreak);for(var k=0,B=[5,15,50,100];k<B.length;k++){var L=B[k];if(x++,o.textContent=e+L.toLocaleString()+" ended Streak",!(L<=I))break;document.getElementById("streakBadge"+x).classList.remove("badgeLocked"),4==x&&(o.textContent="All unlocked")}for(var S=0,T=0,C=[1,2,3,4];T<C.length;T++){var A=C[T];if(S++,a.textContent=e+"Tier "+A.toLocaleString()+" Supporter",!(A<=y))break;document.getElementById("supporterBadge"+S).classList.remove("badgeLocked"),4==S&&(o.textContent="All unlocked")}localStorage.getItem("id")<=2&&document.getElementById("miscBadge1").classList.remove("badgeLocked")}catch(e){console.error("Error in updatePinLocks: "+e)}}document.getElementById("badgeButton").addEventListener("click",(function(){oe(),(0,a.Ak)("basic_button")})),document.getElementById("badgeArea").addEventListener("click",(function(){oe(),(0,a.Ak)("basic_button")})),document.getElementById("badgeClose").addEventListener("click",(function(){(0,a.Ak)("basic_button"),document.getElementById("badgePopup").style.display="none"})),document.querySelectorAll(".badge").forEach((function(e){e.addEventListener("click",(function(){ae(e.id),(0,a.Ak)("item_select")}))}));var x,I=document.getElementById("supporterTag");I.addEventListener("mouseover",(function(){clearTimeout(x),x=setTimeout((function(){document.getElementById("supporterTagText").classList.remove("supporterTextHidden")}),200)})),I.addEventListener("mouseout",(function(){clearTimeout(x),document.getElementById("supporterTagText").classList.add("supporterTextHidden")})),r()}catch(le){r(le)}}))},103:(e,t,n)=>{n.d(t,{R:()=>i});var r,o,a=!1;function i(e,t){o=setTimeout((function(){e(!0);try{googletag.destroySlots([r])}catch(e){console.error("Error destroying slot: "+e)}}),1e4),a=!1,function n(){void 0!==window.googletag&&googletag.cmd?googletag.cmd.push((function(){(r=googletag.defineOutOfPageSlot("/21726375739,23114577746/ca-video-pub-5781531207509232-tag/openguessr.com_Rewarded_Video",googletag.enums.OutOfPageFormat.REWARDED))&&(r.addService(googletag.pubads()),googletag.pubads().addEventListener("rewardedSlotReady",(function(e){clearTimeout(o),e.makeRewardedVisible()})),googletag.pubads().addEventListener("rewardedSlotClosed",(function(){setTimeout((function(){e(!1,a);try{googletag.destroySlots([r])}catch(e){console.error("Error destroying slot: "+e)}}),350)})),googletag.pubads().addEventListener("rewardedSlotGranted",(function(e){a=!0,t()})),googletag.enableServices(),googletag.display(r))})):setTimeout(n,300)}()}window.onload=function(){setTimeout((function(){try{window.googletag=window.googletag||{cmd:[]}}catch(e){console.error("Google tag cannot be assigned: "+e)}}),250)}},49:(e,t,n)=>{n.d(t,{Ak:()=>i,wr:()=>c});var r={},o=1;function a(e){o=Math.max(0,Math.min(e,1)),localStorage.setItem("soundVolume",o);try{for(var t in r)r.hasOwnProperty(t)&&(r[t].volume=.5*o)}catch(e){console.error("Couldn't set global volume for sounds: "+e)}}function i(e,t){try{var n=new Audio("./SOUNDS/"+e+".ogg");n.volume=.5*o,n.play(),r[t]=n}catch(e){console.error("Error playing sound: "+e)}}function c(e){try{r[e]&&(r[e].pause(),r[e].currentTime=0,delete r[e])}catch(e){console.error("Couldn't stop sound: "+e)}}var s=document.getElementById("volumeSlider");function l(){var e=100*s.value;s.style.background="linear-gradient(to right, var(--brand-color) 0%, var(--brand-color) ".concat(e,"%, white ").concat(e,"%, white 100%)")}s.addEventListener("input",(function(){a(s.value),l()}));var u=localStorage.getItem("soundVolume")?localStorage.getItem("soundVolume"):.5;a(u),s.value=u,l()},724:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{H:()=>h});var o=n(560),a=n(880),i=n(49),c=n(103),s=e([o]);o=(s.then?(await s)():s)[0];var l=document.getElementById("endScreenStreakRevive"),u=document.getElementById("streakWatchAd"),d=document.getElementById("keepStreakText"),p=document.getElementById("streakAdDismiss"),m=document.getElementById("streakHeader");u.addEventListener("click",v);var y=0;function f(){u.style.opacity="0.5",u.style.pointerEvents="none",p.style.opacity="1",p.style.pointerEvents="auto",d.innerHTML='<p>You have restored your streak of <span id="streakKeepAmount" class="highlight">'.concat(y,"</span> !</p>"),m.textContent="Streak restored!",(0,o.cH)(y)}function h(e,t){"number"==typeof e&&0!=e&&(y=e),"block"==l.style.display||t?(l.style.maxHeight="0px",setTimeout((function(){l.style.display="none",g()}),250)):(l.style.display="block",setTimeout((function(){l.style.maxHeight="1000px",g()}),20))}function g(){u.style.opacity="1",u.style.pointerEvents="auto",p.style.opacity="1",p.style.pointerEvents="auto",m.textContent="Streak lost!",d.innerHTML='<p>Support us by watching an ad and keep your streak of <span id="streakKeepAmount" class="highlight">'.concat(y,"</span> !</p>")}function v(){u.style.opacity="0.5",u.style.pointerEvents="none",p.style.opacity="0.5",p.style.pointerEvents="none",(0,c.R)(E,f),(0,i.Ak)("basic_button")}function E(e,t){e?((0,a.N)("No ad available","Please try again later or disable Ad Blockers.","No ads",!1,!1),u.style.opacity="1",u.style.pointerEvents="auto",p.style.opacity="1",p.style.pointerEvents="auto"):t?(m.style.color="#00cf22",setTimeout((function(){m.style.color="white"}),700)):((0,a.N)("Ad dismissed","Video ad dismissed. ","",!1,!0),u.style.opacity="1",u.style.pointerEvents="auto",p.style.opacity="1",p.style.pointerEvents="auto")}p.addEventListener("click",(function(){(0,i.Ak)("basic_button"),h(0,!1)})),r()}catch(b){r(b)}}))},138:(e,t,n)=>{n.d(t,{I:()=>o});var r=n(49);function o(e,t){var n,o=!1;clearInterval(n);var a,i,c=e,s=document.getElementById("mapTimer"),l=document.getElementById("mapModeIndicator");return n=setInterval((function(){o=!0,a=parseInt(c/60,10),i=parseInt(c%60,10),a=a<10?"0"+a:a,i=i<10?"0"+i:i,s.textContent=a+":"+i,c<10?(s.classList.add("fading"),l.classList.add("fading"),(0,r.Ak)("ticking_timer","timerSound"),document.getElementById("littleTimeVignette").style.opacity="1"):(s.classList.remove("fading"),l.classList.remove("fading"),document.getElementById("littleTimeVignette").style.opacity="0"),--c<0&&(clearInterval(n),o=!1,s.classList.remove("fading"),l.classList.remove("fading"),document.getElementById("littleTimeVignette").style.opacity="0","function"==typeof t&&t())}),1e3),{getRemainingTime:function(){return c},stopTimer:function(){clearInterval(n),o=!1,s.classList.remove("fading"),l.classList.remove("fading"),document.getElementById("littleTimeVignette").style.opacity="0",(0,r.wr)("timerSound")},isTimerRunning:function(){return o}}}},634:(e,t,n)=>{n.d(t,{Uh:()=>g,hG:()=>m,kZ:()=>E,wz:()=>f});var r=n(880);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof E?t:E,a=Object.create(o.prototype),c=new P(r||[]);return i(a,"_invoke",{value:T(e,n,c)}),a}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var y="suspendedStart",f="suspendedYield",h="executing",g="completed",v={};function E(){}function b(){}function w(){}var x={};d(x,s,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(_([])));k&&k!==n&&r.call(k,s)&&(x=k);var B=w.prototype=E.prototype=Object.create(x);function L(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,i,c,s){var l=m(e[a],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==o(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=y;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=C(c,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===y)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=m(t,n,r);if("normal"===l.type){if(o=r.done?g:f,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=g,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=m(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return b.prototype=w,i(B,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,u,"GeneratorFunction")),e.prototype=Object.create(B),e},t.awrap=function(e){return{__await:e}},L(S.prototype),d(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(p(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(B),d(B,u,"Generator"),d(B,s,(function(){return this})),d(B,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function i(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,s,"next",e)}function s(e){i(a,r,o,c,s,"throw",e)}c(void 0)}))}}var s,l="https://accounts.openguessr.com/accounts",u=("".concat(l,"/login"),"".concat(l,"/delete")),d=("".concat(l,"/register"),"".concat(l,"/update")),p="".concat(l,"/user");"".concat(l,"/leaderboard"),"".concat(l,"/reset-password-request"),"".concat(l,"/reset-password"),"".concat(l,"/supporter-leaderboard");function m(e,t,n){return y.apply(this,arguments)}function y(){return(y=c(a().mark((function e(t,n,r){var o,i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={id:t,password:n},e.next=4,fetch(u,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 4:if(!(i=e.sent).ok){e.next=12;break}return e.next=8,i.json();case 8:return e.sent,e.abrupt("return",!0);case 12:return e.next=14,k(i);case 14:return c=e.sent,console.error("Account deletion failed:",i.status),I("Account deletion failed: "+i.status,r,c),e.abrupt("return",!1);case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(0),console.error("Error occurred during account deletion: ",e.t0),I("Error occured during account deletion: "+e.t0,r),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function f(e,t,n){return h.apply(this,arguments)}function h(){return(h=c(a().mark((function e(t,n,r){var o,i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(p,"/").concat(n),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:if(!(o=e.sent).ok){e.next=12;break}return e.next=7,o.json();case 7:return w((i=e.sent).user),e.abrupt("return",i.user);case 12:return e.next=14,k(o);case 14:c=e.sent,console.error("Fetch failed:",o.status),I("Fetch failed: "+o.status,r,c);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),console.error("Error occurred while fetching the user: ",e.t0),I("Error occurred while fetching the user: "+e.t0,r);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function g(e,t,n,r,o){return v.apply(this,arguments)}function v(){return(v=c(a().mark((function e(t,n,r,o,i){var c,s,l,u,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={id:n,experience:r},s=d+"/experience",e.next=5,fetch(s,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)});case 5:if(!(l=e.sent).ok){e.next=13;break}return e.next=9,l.json();case 9:u=e.sent,localStorage.setItem("experience",u.user.experience),e.next=22;break;case 13:if(400==l.status&&!i){e.next=21;break}return e.next=16,k(l);case 16:p=e.sent,console.error("User update failed:",l.status),I("User update failed: "+l.status,o,p),e.next=22;break;case 21:return e.abrupt("return","retry");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),console.error("Error occurred during user update: ",e.t0),I("Error occured during user update: "+e.t0,o);case 28:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}function E(e,t,n,r){return b.apply(this,arguments)}function b(){return(b=c(a().mark((function e(t,n,r,o){var i,c,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={id:n,userName:r},e.next=4,fetch(d+"/username",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(i)});case 4:if(!(c=e.sent).ok){e.next=12;break}return e.next=8,c.json();case 8:s=e.sent,localStorage.setItem("username",s.user.userName),e.next=17;break;case 12:return e.next=14,k(c);case 14:l=e.sent,console.error("User update failed: ",c.status),I("User update failed: "+c.status,o,l);case 17:return e.abrupt("return",c.ok);case 20:e.prev=20,e.t0=e.catch(0),console.error("Error occurred during user update: ",e.t0),I("Error occured during user update "+e.t0,o);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return(x=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.access_token&&t.id&&(localStorage.setItem("bearer",t.access_token),localStorage.setItem("id",t.id)),localStorage.setItem("username",t.userName),localStorage.setItem("experience",t.experience);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){if(e||(e=""),n||(n=""),"signup"==t)try{errorMessage.innerHTML=e+" - "+n,clearTimeout(s),errorMessage.style.maxHeight="100px",errorMessage.style.marginTop="20px",errorMessage.style.marginBottom="20px",errorMessage.style.opacity="1",errorMessage.style.color="#ffaeae",n||(errorMessage.innerHTML=e),s=setTimeout((function(){errorMessage.style.maxHeight="0",errorMessage.style.opacity="0",errorMessage.style.margin="0"}),7e3)}catch(e){}else"index"==t?n?(0,r.N)("Account Backend Error","Error: "+n,e,!1):(0,r.N)("Account Backend Error","The API reports an unknown error. Please consider reporting this in #bug-reports on the Discord.",e,!1):console.log("No element for displaying the error passed as an argument.")}function k(e){return B.apply(this,arguments)}function B(){return(B=c(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:return n=e.sent,e.abrupt("return",n.error);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}},392:(e,t,n)=>{n.d(t,{$:()=>c,C:()=>s}),window.top.__vm_add=window.top.__vm_add||[];var r,o=document.getElementById("bottomFooterAds"),a=o,i=[];function c(){try{var e=document.getElementById("resultLeaderboardAd"),t=document.getElementById("floatingResultLeaderboardAd"),n="flex"===window.getComputedStyle(document.getElementById("floatingResultLeaderboardArea")).display;l(a=n?t:e)}catch(e){console.error("Error moving ad around in venatus custom js:",e)}}function s(){var e=document.getElementById("bottomFooterAds");l(a=e)}function l(e){try{!function(){window.top.__vm_remove_category=["richmedia_all"],window.top.__vm_remove=window.top.__vm_remove||[];for(var e=0;e<i.length;e++)window.top.__vm_remove.push(i[e]);i=[]}();var t=document.querySelector(".vm-placement");t&&t.remove(),(t=document.createElement("div")).setAttribute("class","vm-placement"),e.appendChild(t);var n=e.getBoundingClientRect().width>=720?"666702f0549bd20a9f2bfab6":"66670320549bd20a9f2bfaba";t.setAttribute("data-id",n),i.push(t),window.top.__vm_add.push(t)}catch(e){console.error("Error in custom ad script: "+e)}}"loading"!==window.document.readyState?l(o):window.document.addEventListener("DOMContentLoaded",(function(){l(o)}));var u=o.getBoundingClientRect().width;window.addEventListener("resize",(function(){clearTimeout(r),r=setTimeout((function(){u!=o.getBoundingClientRect().width&&(u=o.getBoundingClientRect().width,l(a))}),200)}))}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return o[e](n,n.exports,i),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(o,a,i)=>{var c;i&&((c=[]).d=-1);var s,l,u,d=new Set,p=o.exports,m=new Promise(((e,t)=>{u=t,l=e}));m[t]=p,m[e]=e=>(c&&e(c),d.forEach(e),m.catch((e=>{}))),o.exports=m,a((o=>{var a;s=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var a=[];a.d=0,o.then((e=>{i[t]=e,r(a)}),(e=>{i[n]=e,r(a)}));var i={};return i[e]=e=>e(a),i}}var c={};return c[e]=e=>{},c[t]=o,c})))(o);var i=()=>s.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(a=()=>t(i)).r=0;var n=e=>e!==c&&!d.has(e)&&(d.add(e),e&&!e.d&&(a.r++,e.push(a)));s.map((t=>t[e](n)))}));return a.r?l:i()}),(e=>(e?u(m[n]=e):l(p),r(c)))),c&&c.d<0&&(c.d=0)},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(108),i(390),i(103);i(340)})();
